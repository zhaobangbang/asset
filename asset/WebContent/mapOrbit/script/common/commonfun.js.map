{"version":3,"sources":["/script/common/commonfun.js"],"names":[],"mappings":"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","file":"/script/common/commonfun.js","sourcesContent":["/**\r\n * @file 存放公共方法\r\n * @author 崔健 cuijian03@baidu.com 2016.08.20\r\n */\r\n\r\nvar commonfun = {\r\n    /**\r\n     * 根据系统要求变更时间格式\r\n     *\r\n     * @param {string} time UNIX时间戳\r\n     * @return {string} 时间 格式：2016-08-19 19:18:15\r\n     */\r\n    getLocalTime: function (time) { \r\n        var d = new Date(parseInt(time) * 1000);\r\n        var month = d.getMonth() + 1;\r\n        var day =  d.getDate();\r\n        var hour = d.getHours();\r\n        var minute = d.getMinutes();\r\n        var second = d.getSeconds();\r\n        month = month < 10 ? '0' + month : month;\r\n        day = day < 10 ? '0' + day : day;\r\n        hour = hour < 10 ? '0' + hour : hour;\r\n        minute = minute < 10 ? '0' + minute : minute;\r\n        second = second < 10 ? '0' + second : second;\r\n        return d.getFullYear() + '-' + month + '-' +  day + ' ' + hour + ':' + minute + ':' + second; \r\n    },\r\n    /**\r\n     * 获取当前日期\r\n     *\r\n     * @param {string} time UNIX时间戳 可选\r\n     * @return {string} 时间 格式：2016-08-19\r\n     */\r\n    getCurrentDate: function (e) {\r\n        e = e || new Date();\r\n        var d = e;\r\n        var month = d.getMonth() + 1;\r\n        var day =  d.getDate();\r\n        month = month < 10 ? '0' + month : month;\r\n        day = day < 10 ? '0' + day : day;\r\n        return d.getFullYear() + '-' + month + '-' +  day; \r\n    },\r\n    /**\r\n     * 从数组中移除指定项\r\n     *\r\n     * @param {array} 源数组\r\n     * @param {string} 要移除的值\r\n     * @return {array} 处理后的数组\r\n     */\r\n    removeFromArray: function (arr, val) {\r\n        var index = $.inArray(val, arr);\r\n        if (index >= 0) {\r\n            arr.splice(index, 1);\r\n        }\r\n        return arr;\r\n    },\r\n    // 系统中常量\r\n    constVar: {\r\n\r\n    },\r\n    /**\r\n     * 从当前url取参数\r\n     *\r\n     * @param {string} 参数名\r\n     * @return {string} 参数值\r\n     */\r\n    getQueryString: function(name) { \r\n        var reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\", \"i\"); \r\n        var r = window.location.search.substr(1).match(reg); \r\n        if (r != null) {\r\n            return unescape(r[2]); \r\n        }\r\n        return null; \r\n    },\r\n    /**\r\n     * 判断当前设备是否在线，规则是最后上传的轨迹点\r\n     * 时间在当前系统时间十分钟内判断为在线，否则为离线\r\n     *\r\n     * @param {number} time UNIX时间戳\r\n     * @return {number} 在线状态 0在线 1离线\r\n     */\r\n    getOnlineStatus: function(time) {\r\n        var status = 0;\r\n        var timestamp = new Date().getTime() / 1000;\r\n        var timeDiff = (timestamp - time) / 60;\r\n        status = timeDiff >= 10 ? 1 : 0;\r\n        return status;\r\n     },\r\n     /**\r\n     * 判断当前设备是否为静止，规则是速度小于1km/h返回静止，\r\n     * 否则返回速度\r\n     *\r\n     * @param {number} speed 速度 单位为 km/h\r\n     * @return {string} 速度\r\n     */\r\n    getSpeed: function(speed) {\r\n        var speedDesc\r\n        if (speed >= 1) {\r\n            speedDesc = speed.toFixed(1) + 'km/h';\r\n        } else {\r\n            speedDesc = '静止';\r\n        }\r\n        return speedDesc;\r\n     },\r\n    /**\r\n     * 返回当前弹窗中的状态字段数组，\r\n     * 分别为状态、速度、方向\r\n     *\r\n     * @param {number} speed 速度\r\n     * @param {number} time UNIX时间戳\r\n     * @param {number} direction 方向\r\n     * \r\n     * @return {array} 状态\r\n     */\r\n    getInfoWindowStatus: function(speed, time, direction) {\r\n        var statusArr = [];\r\n        speed = speed || 0;\r\n        if (this.getOnlineStatus(time) === 0) {\r\n            if (this.getSpeed(speed) === '静止') {\r\n                statusArr[0] = '静止';\r\n                statusArr[1] = '';\r\n                statusArr[2] = '';\r\n            } else {\r\n                statusArr[0] = '<span class=\"run\">行驶</span>';\r\n                statusArr[1] = this.getSpeed(speed);\r\n                statusArr[2] = this.getDirection(direction);\r\n            }\r\n        } else {\r\n            statusArr[0] = '离线';\r\n            statusArr[1] = '';\r\n            statusArr[2] = '';\r\n        }\r\n\r\n        return statusArr.join(' ');\r\n    },\r\n     /**\r\n     * 返回当前设备运动方向描述，一共分为8种，45度一个\r\n     *\r\n     * @param {number} direction 方向数据\r\n     * @return {string} 方向描述\r\n     */\r\n    getDirection: function(direction) {\r\n        var directionDesc = '';\r\n        direction = direction || 0;\r\n        switch (Math.floor((direction) / 22.5)) {\r\n            case 0:\r\n            case 15:\r\n                directionDesc = '(北)';\r\n            break;\r\n            case 1:\r\n            case 2:\r\n                directionDesc = '(东北)';\r\n            break;\r\n            case 3:\r\n            case 4:\r\n                directionDesc = '(东)';\r\n            break;\r\n            case 5:\r\n            case 6:\r\n                directionDesc = '(东南)';\r\n            break;\r\n            case 7:\r\n            case 8:\r\n                directionDesc = '(南)';\r\n            break;\r\n            case 9:\r\n            case 10:\r\n                directionDesc = '(西南)';\r\n            break;\r\n            case 11:\r\n            case 12:\r\n                directionDesc = '(西)';\r\n            break;\r\n            case 13:\r\n            case 14:\r\n                directionDesc = '(西北)';\r\n            break;\r\n        }\r\n        return directionDesc;\r\n     },\r\n     /**\r\n     * 返回当前车辆图标方向，一个四种，90度一个\r\n     *\r\n     * @param {number} direction 方向数据\r\n     * @return {number} 方向标识 0上 1右 2下 3左\r\n     */\r\n    getDirectionIcon: function(direction) {\r\n        var directionIcon = 0;\r\n        direction = direction || 0;\r\n        switch (Math.floor((direction) / 45)) {\r\n            case 0:\r\n            case 7:\r\n                directionIcon = 0;\r\n            break;\r\n            case 1:\r\n            case 2:\r\n                directionIcon = 1;\r\n            break;\r\n            case 3:\r\n            case 4:\r\n                directionIcon = 2;\r\n            break;\r\n            case 5:\r\n            case 6:\r\n                directionIcon = 3;\r\n            break;\r\n        }\r\n        return directionIcon;\r\n     },\r\n};\r\n\r\n\r\nexport default commonfun;"]}
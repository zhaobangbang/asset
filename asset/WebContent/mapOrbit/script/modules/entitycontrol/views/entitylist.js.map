{"version":3,"sources":["/script/modules/entitycontrol/views/entitylist.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;qBAQiC,OAAO;;;;wBACjB,WAAW;;mCACT,yBAAyB;;;;iCAC1B,uBAAuB;;;;+BACzB,2BAA2B;;;;AAEjD,IAAI,UAAU,GAAG,mBAAM,WAAW,CAAC;;;AAC/B,mBAAe,EAAE,2BAAW;AACxB,eAAO;;AAEH,kBAAM,EAAE,EAAE;;AAEV,sBAAU,EAAE,EAAE;;AAEd,2BAAe,EAAE,EAAE;;AAEnB,gBAAI,EAAE,CAAC;;AAEP,iBAAK,EAAE,CAAC;;AAER,qBAAS,EAAE,CAAC;;AAEZ,uBAAW,EAAE,CAAC;;AAEd,sBAAU,EAAE,CAAC,aAAa,EAAE,YAAY,EAAE,aAAa,EAAE,UAAU,EAAE,UAAU,CAAC;;AAEhF,uBAAW,EAAE,CAAC;;AAEd,2BAAe,EAAE,EAAE;;AAEnB,uBAAW,EAAE,EAAE;;AAEf,gBAAI,EAAE,EAAE;;AAER,qBAAS,EAAE,EAAE;SAChB;KACJ;AACD,qBAAiB,EAAE,6BAAY;AAC3B,YAAI,IAAI,GAAG,IAAI,CAAC;AAChB,uCAAY,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;AACxC,yCAAa,UAAU,EAAE,CAAC;KAE7B;AACD,sBAAkB,EAAE,8BAAY;AAC5B,YAAI,CAAC,gBAAgB,EAAE,CAAC;KAC3B;AACD,kBAAc,EAAE,wBAAU,IAAI,EAAC,IAAI,EAAE;AACjC,gBAAQ,IAAI;AACR,iBAAK,YAAY;AACb,oBAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;AAChC,sBAAM;AACN,iBAAK,MAAM;AACP,oBAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;AAC1B,sBAAM;AACN,iBAAK,UAAU;AACX,oBAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;AAC9B,sBAAM;AACN,iBAAK,YAAY;AACb,oBAAI,CAAC,cAAc,CAAC,IAAI,CAAC;AAC7B,sBAAM;AACN,iBAAK,cAAc;AACf,oBAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;AAClC,sBAAM;AACN,iBAAK,gBAAgB;AACjB,oBAAI,CAAC,oBAAoB,EAAE,CAAC;AAChC,sBAAM;AAAA,SACT;KACJ;;;;;;AAMD,oBAAgB,EAAE,0BAAS,IAAI,EAAE;AAC7B,YAAI,CAAC,QAAQ,CAAC,EAAC,MAAM,EAAE,IAAI,EAAC,CAAC,CAAC;AAC9B,YAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;AACzB,yCAAa,IAAI,CAAC,CAAC,CAAC,CAAC;KACxB;;;;;;AAMD,cAAU,EAAE,oBAAS,IAAI,EAAE;;;AAGvB,YAAI,CAAC,cAAc,EAAE,CAAC;AACtB,YAAI,SAAS,GAAG,IAAI,KAAK,CAAC,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC;AAC5C,iBAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AAClB,YAAI,kBAAkB,GAAG,EAAE,CAAC;AAC5B,YAAI,CAAC,GAAG,CAAC,UAAS,KAAK,EAAE,MAAM,EAAE;AAC7B,8BAAkB,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC;SACnC,CAAC,CAAC;;;;;;AAMH,YAAI,CAAC,QAAQ,CAAC;AACV,sBAAU,EAAE,IAAI;AAChB,2BAAe,EAAE,SAAS;AAC1B,qBAAS,EAAE,kBAAkB;SAChC,CAAC,CAAC;KACN;;;;;;AAMD,kBAAc,EAAE,wBAAS,IAAI,EAAE;AAC3B,YAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;KAC1B;;;;;;AAMD,oBAAgB,EAAE,0BAAS,IAAI,EAAE;AAC7B,YAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;KAC1B;;;;;;AAMD,sBAAkB,EAAE,4BAAS,IAAI,EAAE;AAC/B,YAAI,CAAC,QAAQ,CAAC,EAAC,eAAe,EAAC,EAAE,EAAC,CAAC,CAAC;AACpC,YAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;KAC1B;;;;;AAKD,wBAAoB,EAAE,gCAAW;AAC7B,aAAK,CAAC,OAAO,CAAC,CAAC;KAClB;;;;;;AAMD,eAAW,EAAE,qBAAU,IAAI,EAAE;AACzB,YAAI,IAAI,KAAK,UAAU,EAAE;AACrB,aAAC,CAAC,oBAAoB,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;SAC3C,MAAM;AACH,gBAAI,CAAC,QAAQ,CAAC,EAAC,eAAe,EAAC,EAAE,EAAC,CAAC,CAAC;AACpC,aAAC,CAAC,oBAAoB,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;SAC7C;KACJ;;;;;AAKD,kBAAc,EAAE,0BAAW;AACvB,YAAI,CAAC,QAAQ,CAAC,EAAC,WAAW,EAAC,CAAC,CAAC,cAAc,CAAC,CAAC,MAAM,EAAE,EAAC,CAAC,CAAC;KAC3D;;;;;;AAMD,iBAAa,EAAE,uBAAU,IAAI,EAAC;AAC1B,YAAI,IAAI,GAAG,IAAI,CAAC;AAChB,YAAI,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC;AACtC,SAAC,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC,SAAS,EAAC,OAAO,CAAC,CAAC;AACrC,SAAC,CAAC,gBAAgB,CAAC,CAAC,GAAG,CAAC,SAAS,EAAC,OAAO,CAAC,CAAC;AAC3C,SAAC,CAAC,oBAAoB,CAAC,CAAC,GAAG,CAAC,aAAa,EAAE,mBAAmB,CAAC,CAAC;AAChE,YAAI,MAAM,GAAG,SAAS,CAAC,MAAM,CAAC;AAC9B,aAAK,IAAI,CAAC,GAAG,MAAM,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACvC,gBAAI,CAAC,KAAK,MAAM,EAAE;AACd,yBAAS,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC;aAC1B;;AAED,gBAAI,CAAC,GAAG,MAAM,EAAE;AACZ,yBAAS,CAAC,CAAC,CAAC,GAAG,YAAY,CAAC;aAC/B;SACJ;AACD,YAAI,CAAC,QAAQ,CAAC,EAAC,UAAU,EAAC,SAAS,EAAC,CAAC,CAAC;KACzC;;;;;AAKD,oBAAgB,EAAE,4BAAW;AACzB,YAAI,IAAI,GAAG,IAAI,CAAC;AAChB,SAAC,CAAC,oBAAoB,CAAC,CAAC,MAAM,CAAC;AAC3B,yBAAa,EAAE,uBAAuB;AACtC,sBAAU,EAAE,eAAe;AAC3B,wBAAY,EAAE,KAAK;SACtB,CAAC,CAAC;AACH,SAAC,CAAC,oBAAoB,CAAC,CAAC,EAAE,CAAC,WAAW,EAAE,UAAS,KAAK,EAAC;AACnD,gBAAI,eAAe,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC;AACjD,2BAAe,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;AACjF,gBAAI,CAAC,QAAQ,CAAC,EAAC,eAAe,EAAC,eAAe,EAAC,CAAC,CAAC;AACjD,6CAAa,WAAW,CAAC,eAAe,CAAC,CAAC;SAC7C,CAAC,CAAC;AACH,SAAC,CAAC,oBAAoB,CAAC,CAAC,EAAE,CAAC,aAAa,EAAE,UAAS,KAAK,EAAC;AACrD,gBAAI,eAAe,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC;AACjD,2BAAe,GAAG,6BAAU,eAAe,CAAC,eAAe,EAAE,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;AACzH,gBAAI,CAAC,QAAQ,CAAC,EAAC,eAAe,EAAC,eAAe,EAAC,CAAC,CAAC;AACjD,6CAAa,WAAW,CAAC,eAAe,CAAC,CAAC;SAC7C,CAAC,CAAC;KACN;;;;;;AAMD,oBAAgB,EAAE,0BAAS,KAAK,EAAE;AAC9B,YAAI,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC;AAC1C,sBAAc,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,YAAY,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC;AACzI,YAAI,CAAC,QAAQ,CAAC,EAAC,SAAS,EAAE,cAAc,EAAC,CAAC,CAAC;KAC9C;;;;;;AAMD,wBAAoB,EAAE,8BAAS,KAAK,EAAE;AAClC,YAAI,WAAW,GAAG,KAAK,CAAC,MAAM,CAAC,YAAY,CAAC,aAAa,CAAC,CAAC;AAC3D,YAAI,QAAQ,GAAG,KAAK,CAAC,MAAM,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;AACrD,YAAI,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC,QAAQ,CAAC,EAAE;AAC/C,gBAAI,UAAU,GAAG,EAAE,CAAC;AACpB,sBAAU,CAAC,KAAK,CAAC,MAAM,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC;AACvE,sBAAU,CAAC,WAAW,GAAG,KAAK,CAAC,MAAM,CAAC,YAAY,CAAC,kBAAkB,CAAC,CAAC;AACvE,6CAAa,MAAM,CAAC,UAAU,CAAC,CAAC;AAChC,gBAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC;AACjC,gBAAI,CAAC,WAAW,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC,QAAQ,CAAC,CAAC;AAC7E,gBAAI,CAAC,QAAQ,CAAC,EAAC,UAAU,EAAE,IAAI,EAAC,CAAC,CAAC;SACrC;;AAED,YAAI,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC,QAAQ,CAAC,KAAM,EAAE,EAAE;AACrD,gBAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC;AAChC,gBAAI,CAAC,WAAW,CAAC,CAAC,QAAQ,CAAC,GAAG,SAAS,CAAC;AACxC,gBAAI,CAAC,QAAQ,CAAC;AACV,yBAAS,EAAE,IAAI;aAClB,CAAC,CAAC;SACN;KACJ;;;;;;AAMD,qBAAiB,EAAE,2BAAS,KAAK,EAAE;AAC/B,YAAI,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC;AACxB,WAAG;AACC,gBAAI,GAAG,IAAI,CAAC,aAAa,CAAC;SAC7B,QAAO,IAAI,CAAC,SAAS,IAAI,cAAc,EAAC;AACzC,SAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC,kBAAkB,EAAE,SAAS,CAAC,CAAC;AACtD,YAAI,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC;;;KAGrE;;;;;;AAMD,oBAAgB,EAAE,0BAAS,KAAK,EAAE;AAC9B,YAAI,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC;AACxB,WAAG;AACC,gBAAI,GAAG,IAAI,CAAC,aAAa,CAAC;SAC7B,QAAO,IAAI,CAAC,SAAS,IAAI,cAAc,EAAC;AACzC,SAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC,kBAAkB,EAAE,EAAE,CAAC,CAAC;AAC/C,YAAI,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC;;;KAGrE;AACD,UAAM,EAAE,kBAAW;AACf,YAAI,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;AAC/B,YAAI,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC;AACvC,YAAI,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC;AACvC,YAAI,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC;AACzC,YAAI,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC;AACzC,YAAI,eAAe,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC;AACjD,YAAI,gBAAgB,GAAG,IAAI,CAAC,gBAAgB,CAAC;AAC7C,YAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;AAC3B,YAAI,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC;AACrC,YAAI,oBAAoB,GAAG,IAAI,CAAC,oBAAoB,CAAC;AACrD,YAAI,iBAAiB,GAAG,IAAI,CAAC,iBAAiB,CAAC;AAC/C,YAAI,gBAAgB,GAAG,IAAI,CAAC,gBAAgB,CAAC;AAC7C,eACI;;cAAK,SAAS,EAAC,YAAY;YAGnB;;kBAAO,SAAS,EAAC,aAAa;gBAC1B;;;oBACI;;;wBAAI,yCAAI,SAAS,EAAC,kBAAkB,GAAM;wBAElC,MAAM,CAAC,GAAG,CAAC,UAAS,IAAI,EAAE,KAAK,EAAE;AAC7B,mCAAO;;kCAAI,GAAG,EAAE,KAAM,EAAC,SAAS,EAAE,UAAU,CAAC,KAAK,CAAC,GAAG,QAAS;gCAAC;;sCAAM,KAAK,EAAE,IAAK;oCAAE,IAAI;iCAAQ;6BAAK;yBACxG,CAAC;qBAEL;oBAEG,UAAU,CAAC,GAAG,CAAC,UAAS,IAAI,EAAE,KAAK,EAAE;AACjC,+BAAO;;8BAAI,GAAG,EAAE,KAAM,EAAC,SAAS,EAAC,cAAc,EAAC,WAAW,EAAE,iBAAkB,EAAC,UAAU,EAAE,gBAAiB;4BAAC;;kCAAI,gBAAc,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,EAAC,SAAS,EAAC,YAAY;gCAAC,4CAAO,IAAI,EAAC,UAAU,GAAE;6BAAK;4BAC3L,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE,CAAC,EAAC;AACrB,uCACI;;sCAAI,GAAG,EAAE,CAAE,EAAC,SAAS,EAAE,UAAU,CAAC,CAAC,CAAE;oCAE7B,UAAU,CAAC,CAAC,CAAC,KAAK,YAAY,GAC5B,4CAAO,IAAI,EAAC,MAAM,EAAC,SAAS,EAAC,YAAY,EAAC,oBAAkB,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,EAAC,YAAU,CAAC,CAAC,CAAC,CAAE,EAAC,eAAa,KAAM,EAAC,YAAU,CAAE,EAAC,KAAK,EAAE,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,SAAS,GAAG,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAE,EAAC,QAAQ,EAAE,gBAAiB,EAAC,MAAM,EAAE,oBAAqB,GAAE,GAC3P;;0CAAM,KAAK,EAAE,CAAC,CAAC,CAAC,CAAE;wCAAE,CAAC,CAAC,CAAC,CAAC;qCAAQ;iCAErC,CACR;6BACJ,CAAC;yBACD;qBACR,CAAC;oBAGF,eAAe,CAAC,GAAG,CAAC,UAAS,IAAI,EAAE,KAAK,EAAE;AACtC,+BAAO;;8BAAI,GAAG,EAAE,KAAM;4BAAC,4CAAS;4BAC3B,MAAM,CAAC,GAAG,CAAC,UAAS,KAAK,EAAE,MAAM,EAAE;AAChC,uCAAO,yCAAI,GAAG,EAAE,MAAO,GAAM;6BAChC,CAAC;yBACD;qBACR,CAAC;iBAEN;aACJ;SAIV,CACT;KACJ;CACJ,CAAC,CAAC;;qBAEY,UAAU","file":"/script/modules/entitycontrol/views/entitylist.js","sourcesContent":["/* globals Reflux */\r\n/* eslint-disable fecs-camelcase */\r\n/* eslint-disable max-len */\r\n/**\r\n * @file entity列表 Reflux View\r\n * @author 崔健 cuijian03@baidu.com 2016.08.20\r\n */\r\n\r\nimport React, { Component } from 'react'\r\nimport { render } from 'react-dom'\r\nimport EntityAction from '../actions/entityAction'\r\nimport EntityStore from '../stores/entityStore'\r\nimport Commonfun from '../../../common/commonfun'\r\n\r\nvar Entitylist = React.createClass({\r\n    getInitialState: function() {\r\n        return {\r\n            // 当前entity列表头\r\n            column: [],\r\n            // 当前entity列表数据\r\n            entityList: [],\r\n            // 空白行数\r\n            blankEntityList: [],\r\n            // 总页数\r\n            page: 0,\r\n            // 总数据\r\n            total: 0,\r\n            // 总页数\r\n            totalPage: 0,\r\n            // 当前页码\r\n            currentPage: 0,\r\n            // 列表项的样式class索引\r\n            tableClass: ['entity_name', 'other edit', 'create_time', 'location', 'loc_time'],\r\n            // 列表初始高度，之后会根据当前页数据数量动态变化\r\n            tableHeight: 0,\r\n            // 当前页选中的entity\r\n            checkedEntities: [],\r\n            // 列表下样式条，为了避免数据加载前页面闪动，初始时不加载\r\n            tableBottom: '',\r\n            // 标记是否正在进行自定义字段编辑 0未编辑  1正在编辑\r\n            edit: [],\r\n            // 编辑的值\r\n            editValue: []\r\n        }\r\n    },\r\n    componentDidMount: function () {\r\n        var self = this;\r\n        EntityStore.listen(self.onStatusChange);\r\n        EntityAction.listcolumn();\r\n        \r\n    }, \r\n    componentDidUpdate: function () {\r\n        this.setCheckboxStyle();\r\n    },\r\n    onStatusChange: function (type,data) {\r\n        switch (type){\r\n            case 'listcolumn':\r\n                this.listenListcolumn(data);\r\n            break;\r\n            case 'list':\r\n                this.listenList(data);\r\n            break;\r\n            case 'checkall':\r\n                this.listenCheckall(type);  \r\n            break;\r\n            case 'uncheckall':\r\n                this.listenCheckall(type)\r\n            break;\r\n            case 'listcomplete':\r\n                this.listenListcomplete(type);\r\n            break;\r\n            case 'removecomplete':\r\n                this.listenRemovecomplete();\r\n            break;\r\n        }\r\n    },\r\n    /**\r\n     * 响应Store listcolumn事件，设置表头\r\n     *\r\n     * @param {array} 表头信息\r\n     */\r\n    listenListcolumn: function(data) {\r\n        this.setState({column: data});\r\n        this.setTableStyle(data);\r\n        EntityAction.list(1);\r\n    },\r\n    /**\r\n     * 响应Store list事件，设置列表内容，表高，初始化checkbox状态\r\n     *\r\n     * @param {array} 表内数据\r\n     */\r\n    listenList: function(data) {\r\n        // this.setState({entityList:data});\r\n        \r\n        this.setTableHeight();\r\n        var tempArray = new Array(15 - data.length);\r\n        tempArray.fill(1);\r\n        var tempEditValueArray = [];\r\n        data.map(function(item1, index1) {\r\n            tempEditValueArray[index1] = [];\r\n        });\r\n\r\n        // this.setState({edit: tempColumnArray});\r\n\r\n        // this.setState({editValue: tempEditValueArray});\r\n\r\n        this.setState({\r\n            entityList: data,\r\n            blankEntityList: tempArray,\r\n            editValue: tempEditValueArray\r\n        });\r\n    },\r\n    /**\r\n     * 响应Store checkall事件，选中当前页所有checkbox\r\n     *\r\n     * @param {array} 类型\r\n     */\r\n    listenCheckall: function(type) {\r\n        this.toggleCheck(type);\r\n    },\r\n    /**\r\n     * 响应Store uncheckall事件，取消选中当前页所有checkbox\r\n     *\r\n     * @param {string} 类型\r\n     */\r\n    listenUncheckall: function(type) {\r\n        this.toggleCheck(type);\r\n    },\r\n    /**\r\n     * 响应Store listcomplete事件，选中当前页所有checkbox\r\n     *\r\n     * @param {string} 类型\r\n     */\r\n    listenListcomplete: function(type) {\r\n        this.setState({checkedEntities:[]});\r\n        this.toggleCheck(type);\r\n    },\r\n    /**\r\n     * 响应Store removecomplete事件，提示删除成功\r\n     *\r\n     */\r\n    listenRemovecomplete: function() {\r\n        alert('删除成功！');\r\n    },\r\n    /**\r\n     * view内部，清空输入的新entity数据\r\n     *\r\n     * @param {string} 类型\r\n     */\r\n    toggleCheck: function (type) {\r\n        if (type === 'checkall') {\r\n            $('.entityTable input').iCheck('check');\r\n        } else {\r\n            this.setState({checkedEntities:[]});\r\n            $('.entityTable input').iCheck('uncheck');\r\n        }\r\n    },\r\n    /**\r\n     * view内部，设置当前entity列表高度\r\n     *\r\n     */\r\n    setTableHeight: function() {\r\n        this.setState({tableHeight:$('.entityTable').height()});\r\n    },\r\n    /**\r\n     * view内部，设置当前entity列表样式\r\n     *\r\n     * @param {array} entity列头\r\n     */\r\n    setTableStyle: function (data){\r\n        var that = this;\r\n        var tempClass = this.state.tableClass;\r\n        $('.control').css('display','block');\r\n        $('.bottomControl').css('display','block');\r\n        $('.entityList .thead').css('border-left', '1px solid #2096ff');\r\n        var length = tempClass.length;\r\n        for (var i = length; i < data.length; i++) {\r\n            if (i === length) {\r\n                tempClass[i] = 'other';\r\n            }\r\n            \r\n            if (i > length) {\r\n                tempClass[i] = 'other edit';\r\n            }\r\n        }\r\n        this.setState({tableClass:tempClass});\r\n    },\r\n    /**\r\n     * view内部，设置checkbox样式\r\n     *\r\n     */\r\n    setCheckboxStyle: function (){\r\n        var that = this;\r\n        $('.entityTable input').iCheck({\r\n            checkboxClass: 'icheckbox_square-blue',\r\n            radioClass: 'iradio_square',\r\n            increaseArea: '20%' // optional\r\n        });\r\n        $('.entityTable input').on('ifChecked', function(event){\r\n            var checkedEntities = that.state.checkedEntities;\r\n            checkedEntities.push($(event.target.parentNode.parentNode).attr('data-keyname'));\r\n            that.setState({checkedEntities:checkedEntities});\r\n            EntityAction.updatecheck(checkedEntities);\r\n        });\r\n        $('.entityTable input').on('ifUnchecked', function(event){\r\n            var checkedEntities = that.state.checkedEntities;\r\n            checkedEntities = Commonfun.removeFromArray(checkedEntities, $(event.target.parentNode.parentNode).attr('data-keyname'));\r\n            that.setState({checkedEntities:checkedEntities});\r\n            EntityAction.updatecheck(checkedEntities);\r\n        });\r\n    },\r\n    /**\r\n     * DOM操作回调，编辑自定义字段\r\n     *\r\n     * @param {object} event 事件对象\r\n     */\r\n    handleEditEntity: function(event) {\r\n        let tempValueArray = this.state.editValue;\r\n        tempValueArray[parseInt(event.target.getAttribute('data-column'))][parseInt(event.target.getAttribute('data-row'))] = event.target.value;\r\n        this.setState({editValue: tempValueArray});\r\n    },\r\n    /**\r\n     * DOM操作回调，保存自定义字段\r\n     *\r\n     * @param {object} event 事件对象\r\n     */\r\n    handleSaveEditEntity: function(event) {\r\n        let data_column = event.target.getAttribute('data-column');\r\n        let data_row = event.target.getAttribute('data-row');\r\n        if (!!this.state.editValue[data_column][data_row]) {\r\n            let tempObject = {};\r\n            tempObject[event.target.getAttribute('data-key')] = event.target.value;\r\n            tempObject.entity_name = event.target.getAttribute('data-entity_name');\r\n            EntityAction.update(tempObject);\r\n            let temp = this.state.entityList;\r\n            temp[data_column][data_row][1] = this.state.editValue[data_column][data_row];\r\n            this.setState({entityList: temp});\r\n        }\r\n\r\n        if (this.state.editValue[data_column][data_row]  === '') {\r\n            let temp = this.state.editValue;\r\n            temp[data_column][data_row] = undefined;\r\n            this.setState({\r\n                editValue: temp\r\n            });\r\n        }\r\n    },\r\n    /**\r\n     * DOM操作回调，处理鼠标浮动到tr上\r\n     *\r\n     * @param {object} event 事件对象\r\n     */\r\n    handleTrMouseOver: function(event) {\r\n        var node = event.target;\r\n        do {\r\n            node = node.parentElement;\r\n        } while(node.className != 'entitylistTr')\r\n        $(node.childNodes).css('background-color', '#f4f4f4');\r\n        var entity_name = node.childNodes[0].getAttribute('data-keyname');\r\n        // $(\"input[data-entity_name=\"+entity_name + \"]\").css('background-color', '#f4f4f4');\r\n        // $(\"input[data-entity_name=\"+entity_name + \"]\").css('border-color', '#f4f4f4');\r\n    },\r\n    /**\r\n     * DOM操作回调，处理鼠标移开tr上\r\n     *\r\n     * @param {object} event 事件对象\r\n     */\r\n    handleTrMouseOut: function(event) {\r\n        var node = event.target;\r\n        do {\r\n            node = node.parentElement;\r\n        } while(node.className != 'entitylistTr')\r\n        $(node.childNodes).css('background-color', '');\r\n        var entity_name = node.childNodes[0].getAttribute('data-keyname');\r\n        // $(\"input[data-entity_name=\"+entity_name + \"]\").css('background-color', '');\r\n        // $(\"input[data-entity_name=\"+entity_name + \"]\").css('border-color', '');\r\n    },\r\n    render: function() {\r\n        var column = this.state.column;\r\n        var entityList = this.state.entityList;\r\n        var tableClass = this.state.tableClass;\r\n        var tableHeight = this.state.tableHeight;\r\n        var tableBottom = this.state.tableBottom;\r\n        var blankEntityList = this.state.blankEntityList;\r\n        var handleEditEntity = this.handleEditEntity;\r\n        var edit = this.state.edit;\r\n        var editValue = this.state.editValue;\r\n        var handleSaveEditEntity = this.handleSaveEditEntity;\r\n        var handleTrMouseOver = this.handleTrMouseOver;\r\n        var handleTrMouseOut = this.handleTrMouseOut;\r\n        return (\r\n            <div className=\"entityList\">\r\n                \r\n    \r\n                    <table className=\"entityTable\">\r\n                        <tbody>\r\n                            <tr><td className=\"thead tableCheck\"></td>\r\n                                {\r\n                                    column.map(function(item, index) {\r\n                                        return <td key={index} className={tableClass[index] + ' thead'}><addr title={item}>{item}</addr></td>\r\n                                    })\r\n                                }\r\n                            </tr>\r\n                                {\r\n                                    entityList.map(function(item, index) {\r\n                                        return <tr key={index} className=\"entitylistTr\" onMouseOver={handleTrMouseOver} onMouseOut={handleTrMouseOut}><td data-keyname={item[0][1]} className=\"tableCheck\"><input type=\"checkbox\"/></td>\r\n                                            {item.map(function (i, j){\r\n                                                return (\r\n                                                    <td key={j} className={tableClass[j]}>\r\n                                                        {\r\n                                                            tableClass[j] === 'other edit'\r\n                                                            ? <input type=\"text\" className=\"editEntity\" data-entity_name={item[0][1]} data-key={i[0]} data-column={index} data-row={j} value={editValue[index][j] !== undefined ? editValue[index][j] : i[1]} onChange={handleEditEntity} onBlur={handleSaveEditEntity}/>\r\n                                                            : <abbr title={i[1]}>{i[1]}</abbr>\r\n                                                        }\r\n                                                    </td>\r\n                                                )\r\n                                            })}\r\n                                        </tr>\r\n                                    })\r\n                                }\r\n                                {\r\n                                    blankEntityList.map(function(item, index) {\r\n                                        return <tr key={index}><td></td>\r\n                                            {column.map(function(citem, cindex) {\r\n                                                return <td key={cindex}></td>\r\n                                            })}\r\n                                        </tr>\r\n                                    })\r\n                                }\r\n                        </tbody>\r\n                    </table>\r\n\r\n\r\n                \r\n            </div>\r\n        )\r\n    }\r\n});\r\n\r\nexport default Entitylist"]}
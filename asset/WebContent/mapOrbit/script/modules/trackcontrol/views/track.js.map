{"version":3,"sources":["/script/modules/trackcontrol/views/track.js"],"names":[],"mappings":";;;;;;;;;;;;;;qBAIiC,OAAO;;;;wBACjB,WAAW;;gCACX,sBAAsB;;;;yBACvB,WAAW;;;;uCACT,iCAAiC;;;;2BACjC,aAAa;;;;6BACX,eAAe;;;;4BAChB,cAAc;;;;kCACf,wBAAwB;;;;AAGhD,IAAI,KAAK,GAAG,mBAAM,WAAW,CAAC;;;AAC1B,mBAAe,EAAE,2BAAW;AACxB,eAAO;;AAEH,oBAAQ,EAAE,CAAC;;AAEX,yBAAa,EAAE,EAAE;SACpB;KACJ;AACD,qBAAiB,EAAE,6BAAY;AAC3B,sCAAW,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;AACvC,6CAAY,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;KAC3C;AACD,kBAAc,EAAE,wBAAU,IAAI,EAAC,IAAI,EAAE;AACjC,gBAAQ,IAAI;AACR,iBAAK,iBAAiB;AACnB,oBAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,CAAC;AACpC,sBAAM;AACN,iBAAK,WAAW;AACZ,oBAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;AAC/B,sBAAM;AAAA,SACT;KACJ;;;;;;AAMD,yBAAqB,EAAE,+BAAS,IAAI,EAAE;AAClC,YAAI,CAAC,QAAQ,CAAC,EAAC,QAAQ,EAAE,IAAI,EAAC,CAAC,CAAC;AAChC,YAAG,IAAI,KAAK,CAAC,EAAC;AACV,4CAAY,aAAa,EAAE,CAAC;AAC5B,sBAAU,CAAC,gBAAgB,EAAE,CAAC;AAC9B,sBAAU,CAAC,oBAAoB,EAAE,CAAC;SACrC,MAAM;AACH,4CAAY,SAAS,EAAE,CAAC;AACxB,sBAAU,CAAC,kBAAkB,EAAE,CAAC;AAChC,sBAAU,CAAC,kBAAkB,EAAE,CAAC;AAChC,gBAAI,QAAQ,GAAG,GAAG,CAAC,WAAW,EAAE,CAAC;AACjC,eAAG,CAAC,aAAa,EAAE,CAAC;SACvB;KACJ;;;;;;AAMD,mBAAe,EAAE,yBAAS,IAAI,EAAE;AAC5B,YAAI,IAAI,KAAK,CAAC,EAAC;AACX,gBAAI,CAAC,QAAQ,CAAC,EAAC,aAAa,EAAE,EAAE,EAAC,CAAC,CAAC;SACtC,MAAM;AACH,gBAAI,CAAC,QAAQ,CAAC,EAAC,aAAa,EAAE,EAAC,UAAU,EAAE,SAAS,EAAC,EAAC,CAAC,CAAC;SAC3D;KACJ;AACD,UAAM,EAAE,kBAAW;AACf,YAAI,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC;AACnC,YAAI,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC;AAC7C,eACI;;cAAK,SAAS,EAAE,QAAQ,KAAK,CAAC,GAAG,cAAc,GAAG,eAAgB,EAAC,KAAK,EAAE,aAAc;YACpF,kEAAiB;YACjB,gEAAe;YACf,iEAAgB;SACd,CAET;KACJ;CACJ,CAAC,CAAC;;qBAEY,KAAK","file":"/script/modules/trackcontrol/views/track.js","sourcesContent":["/**\r\n * @file 实时监控 Reflux View\r\n * @author 崔健 cuijian03@baidu.com 2016.08.22\r\n */\r\nimport React, { Component } from 'react'\r\nimport { render } from 'react-dom'\r\nimport TrackStore from '../stores/trackStore'\r\nimport ManageTab from 'managetab'\r\nimport CommonStore from '../../common/stores/commonStore'\r\nimport Tracksearch from 'tracksearch'\r\nimport Trackdatetime from 'trackdatetime'\r\nimport Trackcontent from 'trackcontent'\r\nimport TrackAction from '../actions/trackAction'\r\n\r\n\r\nvar Track = React.createClass({\r\n    getInitialState: function() {\r\n        return {\r\n            // 页签编码 0为实时监控 1为轨迹查询\r\n            tabIndex: 0,\r\n            // 父容器可见性\r\n            parentVisible: {}\r\n        }\r\n    },\r\n    componentDidMount: function () {\r\n        TrackStore.listen(this.onStatusChange);\r\n        CommonStore.listen(this.onStatusChange);\r\n    }, \r\n    onStatusChange: function (type,data) {\r\n        switch (type){\r\n            case 'switchmanagetab':\r\n               this.listenSwitchmanageTab(data);\r\n            break;\r\n            case 'switchtab':\r\n                this.listenSwitchTab(data);\r\n            break;\r\n        }\r\n    },\r\n    /**\r\n     * 响应Store switchmanagetab事件，设置标签页\r\n     *\r\n     * @param {data} 标签页标识\r\n     */\r\n    listenSwitchmanageTab: function(data) {\r\n        this.setState({tabIndex: data});\r\n        if(data === 1){\r\n            TrackAction.hideselectcar();\r\n            mapControl.showSpeedControl();\r\n            mapControl.removeTrafficControl();\r\n        } else {\r\n            TrackAction.selectcar();\r\n            mapControl.showTrafficControl();\r\n            mapControl.removeSpeedControl();\r\n            var overlays = map.getOverlays();\r\n            map.clearOverlays();\r\n        }\r\n    },\r\n    /**\r\n     * 响应Store switchtab事件，隐藏manage\r\n     *\r\n     * @param {data} 标签页标识\r\n     */\r\n    listenSwitchTab: function(data) {\r\n        if (data === 0){\r\n            this.setState({parentVisible: {}});\r\n        } else {\r\n            this.setState({parentVisible: {visibility: 'inherit'}});\r\n        }\r\n    },\r\n    render: function() {\r\n        var tabIndex = this.state.tabIndex;\r\n        var parentVisible = this.state.parentVisible;\r\n        return (\r\n            <div className={tabIndex === 0 ? 'track hidden' : 'track visible'} style={parentVisible} >\r\n                <Trackdatetime />\r\n                <Tracksearch />\r\n                <Trackcontent />\r\n            </div>\r\n\r\n        )\r\n    }\r\n});\r\n\r\nexport default Track;\r\n"]}
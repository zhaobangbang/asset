{"version":3,"sources":["/script/modules/trackcontrol/views/monitorallpage.js"],"names":[],"mappings":"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","file":"/script/modules/trackcontrol/views/monitorallpage.js","sourcesContent":["/**\r\n * @file 轨迹监控页码翻页部分 Reflux View\r\n * @author 崔健 cuijian03@baidu.com 2016.08.24\r\n */\r\n\r\nimport React, { Component } from 'react'\r\nimport { render } from 'react-dom'\r\nimport TrackAction from '../actions/trackAction'\r\nimport TrackStore from '../stores/trackStore'\r\n\r\nvar Monitorallpage = React.createClass({\r\n    componentWillUpdate: function() {\r\n        // console.log(this.state.totalPage);\r\n    },\r\n    getInitialState: function() {\r\n        return {\r\n            // 当前页码\r\n            currentPage: 1,\r\n            // 输入框中的页码\r\n            inputPage: 1,\r\n            // // 总页码\r\n            totalPage: 0,\r\n            // 上一页按钮的样式，分为lasepageon&lastPageOff两种\r\n            lastPage: 'lastPageOff',\r\n            // 下一页按钮的样式，分为nextPageOn&nextPageOff两种\r\n            nextPage: 'nextPageOff',\r\n            // 翻页状态，当正在翻页过程中，翻页按钮不可点\r\n            cliking: 0\r\n        }\r\n    },\r\n    componentDidMount: function () {\r\n        TrackStore.listen(this.onStatusChange);\r\n        // todo 循环加载 暂时先关闭\r\n        setInterval(() => {TrackAction.searchallentity();},10000);\r\n        setInterval(() => {\r\n            if (map.getZoom() >= 14) {\r\n                TrackAction.boundsearchentity();\r\n            }\r\n        }, 10000);\r\n    }, \r\n    onStatusChange: function (type,data) {\r\n        switch (type){\r\n            case 'totalallpage':\r\n                this.listenTotalpage(data);\r\n            break;\r\n            case 'alllist':\r\n                this.listenAllList();\r\n            break;\r\n            case 'initallpage':\r\n                this.listenInitpage();\r\n            break;\r\n        }\r\n    },\r\n    /**\r\n     * 响应Store totalpage事件，设置总数量量\r\n     *\r\n     * @param {data} 总页数\r\n     */\r\n    listenTotalpage: function(data) {\r\n        this.setState({totalPage:data});\r\n        this.setSwichPageStyle(this.state.currentPage);\r\n    },\r\n    /**\r\n     * 响应Store alllist事件，开启翻页按钮可点\r\n     *\r\n     */\r\n    listenAllList: function() {\r\n        this.setState({cliking: 0});\r\n    },\r\n    /**\r\n     * 响应Store initpage事件，初始化页码和按钮状态\r\n     *\r\n     */\r\n    listenInitpage: function() {\r\n        this.setState({\r\n            // 当前页码\r\n            currentPage: 1,\r\n            // 输入框中的页码\r\n            inputPage: 1,\r\n            // 总页码\r\n            totalPage: 0,\r\n            // 上一页按钮的样式，分为lasepageon&lastPageOff两种\r\n            lastPage: 'lastPageOff',\r\n            // 下一页按钮的样式，分为nextPageOn&nextPageOff两种\r\n            nextPage: 'nextPageOff',\r\n            // 翻页状态，当正在翻页过程中，翻页按钮不可点\r\n            cliking: 0\r\n        });\r\n    },\r\n    /**\r\n     * DOM操作回调，页码输入value变化\r\n     *\r\n     * @param {object} event 事件对象 \r\n     */\r\n    handleChange: function (event) {\r\n        this.setState({inputPage:event.target.value});\r\n    },\r\n    /**\r\n     * DOM操作回调，页码输入value确定\r\n     *\r\n     * @param {object} event 事件对象 \r\n     */\r\n    handleBlur: function (event) {\r\n        if(parseInt(event.target.value) > 0 && parseInt(event.target.value) <= this.state.totalPage) {\r\n            this.setState({inputPage: parseInt(event.target.value)});\r\n        } else {\r\n            this.setState({inputPage: 1});\r\n        }\r\n    },\r\n    /**\r\n     * DOM操作回调，点击跳转页面按钮\r\n     *\r\n     * @param {object} event 事件对象 \r\n     */\r\n    handleJumppage: function (event) {\r\n        if(this.state.currentPage == this.state.inputPage || this.state.cliking === 1) {\r\n            return;\r\n        }\r\n        var jumpPage = this.state.inputPage;\r\n        this.setState({currentPage: jumpPage});\r\n        TrackAction.searchallentity(jumpPage);\r\n        this.setState({cliking: 1});\r\n    },\r\n    /**\r\n     * DOM操作回调，点击上一页\r\n     *\r\n     * @param {object} event 事件对象 \r\n     */\r\n    handleLastpage: function (event) {\r\n        if(this.state.currentPage === 1 || this.state.cliking === 1) {\r\n            return;\r\n        } else {\r\n            var lastPage = this.state.currentPage - 1;\r\n            this.setState({currentPage: lastPage});\r\n            this.setState({inputPage: lastPage});\r\n            TrackAction.searchallentity(lastPage);\r\n            this.setState({cliking: 1});\r\n        }\r\n    },\r\n    /**\r\n     * DOM操作回调，点击下一页\r\n     *\r\n     * @param {object} event 事件对象 \r\n     */\r\n    handleNextpage: function (event) {\r\n        if(this.state.currentPage === this.state.totalPage || this.state.cliking === 1) {\r\n            return;\r\n        } else {\r\n            var nextPage = this.state.currentPage + 1;\r\n            this.setState({currentPage: nextPage});\r\n            this.setState({inputPage: nextPage});\r\n            TrackAction.searchallentity(nextPage);\r\n            this.setState({cliking: 1});\r\n        }\r\n    },\r\n    /**\r\n     * DOM操作回调，点击回车检索\r\n     *\r\n     * @param {object} event 事件对象\r\n     */\r\n    handleKeyBoard: function(event) {\r\n        if(this.state.currentPage == this.state.inputPage || this.state.cliking === 1) {\r\n            return;\r\n        }\r\n        if(event.key === 'Enter') {   \r\n            if(parseInt(event.target.value) > 0 && parseInt(event.target.value) <= this.state.totalPage) {\r\n                this.setState({inputPage: parseInt(event.target.value)});\r\n                var jumpPage = parseInt(event.target.value);\r\n                this.setState({currentPage: jumpPage});\r\n                TrackAction.searchallentity(jumpPage);\r\n                this.setState({cliking: 1});\r\n            } else {\r\n                this.setState({inputPage: 1});\r\n                var jumpPage = parseInt(1);\r\n                this.setState({currentPage: jumpPage});\r\n                TrackAction.searchallentity(jumpPage);\r\n            }\r\n        }\r\n    },\r\n    /**\r\n     * view内部，设置翻页按钮样式\r\n     *\r\n     * @param {number} jumpPage 要跳转到的页 \r\n     */\r\n    setSwichPageStyle: function (jumpPage) {\r\n        if(jumpPage === 1) {\r\n            this.setState({lastPage: 'lastPageOff'});\r\n        } else {\r\n            this.setState({lastPage: 'lastPageOn'});\r\n        }\r\n        if(jumpPage === this.state.totalPage) {\r\n            this.setState({nextPage: 'nextPageOff'});\r\n        } else {\r\n            this.setState({nextPage: 'nextPageOn'});\r\n        }\r\n        this.setState({currentPage: jumpPage});\r\n    },\r\n    render: function () {\r\n        var currentPage = this.state.currentPage;\r\n        var totalPage = this.state.totalPage;\r\n        var lastPage = this.state.lastPage;\r\n        var nextPage = this.state.nextPage;\r\n        var inputPage = this.state.inputPage;\r\n        return (\r\n            <div className=\"monitorPage\">\r\n                <div className=\"jumpPage\">\r\n                    <input type=\"text\" className=\"inputPage\" value={inputPage} onChange={this.handleChange} onBlur={this.handleBlur} onKeyPress={this.handleKeyBoard} />\r\n                    <span className=\"pageNumber\">/{'    ' + totalPage}页</span>\r\n                    <span className=\"goPage\" onClick={this.handleJumppage}>GO</span>\r\n                </div>\r\n                <div className=\"switchPage\">\r\n                    <span className={lastPage} onClick={this.handleLastpage}></span>\r\n                    <span className={nextPage} onClick={this.handleNextpage}></span>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n});\r\n\r\nexport default Monitorallpage;\r\n"]}
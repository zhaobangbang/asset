{"version":3,"sources":["/script/modules/trackcontrol/views/timeline.js"],"names":[],"mappings":"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","file":"/script/modules/trackcontrol/views/timeline.js","sourcesContent":["/* globals map */\r\n/* globals BMap */\r\n/* globals Reflux */\r\n/* eslint-disable fecs-camelcase */\r\n/* eslint-disable max-len */\r\n/**\r\n * @file 轨迹管理台时间轴 Reflux View\r\n * @author 崔健 cuijian03@baidu.com 2016.08.31\r\n */\r\nimport React, { Component } from 'react'\r\nimport { render } from 'react-dom'\r\nimport TrackAction from '../actions/trackAction'\r\nimport TrackStore from '../stores/trackStore'\r\nimport CommonStore from '../../common/stores/commonStore'\r\n\r\nvar Timeline = React.createClass({\r\n    getDefaultProps() {\r\n        return {\r\n            // 时间轴总长\r\n            timelineLong: 721\r\n        };\r\n    },\r\n    getInitialState: function() {\r\n        return {\r\n            // 页签编码 0为实时监控 1为轨迹查询\r\n            tabIndex: 0,\r\n            // 父容器可见性\r\n            parentVisible: {},\r\n            // 时间轴显示的小时数量\r\n            timeCount: [],\r\n            // 时间轴显示的时间数字标识\r\n            timeNumber: [],\r\n            // 时间轴位置\r\n            progress: 0,\r\n            // 当前时间轴位置\r\n            currentProgress: 0,\r\n            // 当前时间轴位置对应的pageX\r\n            currentPageX:  0,\r\n            // 初始鼠标拖动位置\r\n            initMouseX: 0,\r\n            // label的位置\r\n            label: 0,\r\n            // lable可见性\r\n            labelVisible: 'blank',\r\n            // 当前时间轴位置代表的时间戳\r\n            currentTimeStamp: 0,\r\n            // 当前有数据的时间段数组\r\n            dataPart: [],\r\n            // 当天起始时间时间错\r\n            initTimeStamp: 0,\r\n            // 所有路径点数据\r\n            totalPointData:[],\r\n            // 播放按钮状态\r\n            playOrPause: 'timelinePlay',\r\n            // 播放速度，常规速度为0.1/frame \r\n            // 减速为 0.08,0.06,0.04,0.02,0.01 \r\n            // 加速为 0.12,0.14,0.16,0.18,0.20\r\n            playSpeed: [0.01, 0.02, 0.04, 0.06, 0.08, 0.1, 0.12, 0.14, 0.16, 0.18, 0.2],\r\n            //当前播放速度位置\r\n            playSpeedIndex: 5,\r\n            // 浮动时间\r\n            hovertime: '0:0',\r\n            // 卡尺A位置\r\n            caliperAPosition: 0,\r\n            // 卡尺B位置\r\n            caliperBPosition: this.props.timelineLong,\r\n            // 卡尺A的clientX\r\n            caliperAclientX: 0,\r\n            // 当前拖动的卡尺\r\n            caluperCurrent: ''\r\n        }\r\n    },\r\n    componentDidMount: function () {\r\n        TrackStore.listen(this.onStatusChange);\r\n        CommonStore.listen(this.onStatusChange);\r\n        this.initTimeCount();\r\n    }, \r\n    onStatusChange: function (type,data) {\r\n        switch (type){\r\n            case 'trackroute':\r\n               this.listenTrackRoute(data);\r\n            break;\r\n            case 'switchmanagetab':\r\n                this.listenSwitchmanageTab(data);\r\n            break;\r\n            case 'switchtab':\r\n                this.listenSwitchTab(data);\r\n            break;\r\n        }\r\n    },\r\n    /**\r\n     * 响应Store switchmanagetab事件，设置标签页\r\n     *\r\n     * @param {data} 标签页标识\r\n     */\r\n    listenSwitchmanageTab: function(data) {\r\n        this.setState({tabIndex: data});\r\n        if (data === 0){\r\n            // this.setState({parentVisible: {visibility: 'inherit'}});\r\n        } else {\r\n            // this.setState({parentVisible: {}});\r\n        }\r\n    },\r\n    /**\r\n     * 响应Store switchtab事件，隐藏manage\r\n     *\r\n     * @param {data} 标签页标识\r\n     */\r\n    listenSwitchTab: function(data) {\r\n        if (data === 0){\r\n            this.setState({parentVisible: {}});\r\n        } else {\r\n            this.setState({parentVisible: {visibility: 'inherit'}});\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 初始化卡尺\r\n     *\r\n     */\r\n    initCaliper() {\r\n        this.setState({\r\n            // 卡尺A位置\r\n            caliperAPosition: 0,\r\n            // 卡尺B位置\r\n            caliperBPosition: this.props.timelineLong,\r\n            // 卡尺A的clientX\r\n            caliperAclientX: 0,\r\n            // 当前拖动的卡尺\r\n            caluperCurrent: ''\r\n        });\r\n    },\r\n\r\n    /**\r\n     * 响应Store trackroute事件，绘制时间轴\r\n     *\r\n     * @param {data} 轨迹数据\r\n     */\r\n    listenTrackRoute: function(data) {\r\n        this.initCaliper();\r\n        var that = this;\r\n        if (data.length === 0) {\r\n            return;\r\n        }\r\n        that.setState({totalPointData: data});\r\n        var timePart = [{}];\r\n        var pxPart = [{}];\r\n        var j = 0;\r\n        var date = new Date(data[0].loc_time * 1000);\r\n        // that.setState({initTimeStamp: data[0].loc_time - (data[0].loc_time % 86400 - 57600)});\r\n        that.setState({initTimeStamp: data[0].loc_time - (date.getHours() * 3600 + date.getMinutes() * 60 + date.getSeconds())});\r\n        timePart[j].start_time = data[0].loc_time;\r\n        pxPart[j].start_time = that.getPxByTime(data[0].loc_time);\r\n        for (var i = 0; i < data.length - 1; i++) {\r\n            if (data[i + 1].loc_time - data[i].loc_time <= 5 * 60) {\r\n                timePart[j].end_time = data[i + 1].loc_time;\r\n                pxPart[j].end_time = that.getPxByTime(data[i + 1].loc_time);\r\n            } else {\r\n                j++;\r\n                timePart[j] = {};\r\n                timePart[j].start_time = data[i + 1].loc_time;\r\n                pxPart[j] = {};\r\n                pxPart[j].start_time = that.getPxByTime(data[i + 1].loc_time);\r\n            }\r\n        }\r\n        that.setState({dataPart: pxPart});\r\n        that.setState({progress: pxPart[0].start_time - 0, currentProgress: pxPart[0].start_time - 0});\r\n        that.setState({initMouseX: $('.timelineProgress').offset().left + 20 });\r\n        that.setState({currentPageX: $('.timelineProgress').offset().left + 20 });\r\n        if (typeof(canvasLayerRunning) != \"undefined\") {\r\n            map.removeOverlay(canvasLayerRunning);\r\n            canvasLayerRunning = undefined;\r\n        }\r\n        that.setState({playOrPause: 'timelinePlay'});\r\n        that.setRunningPointByProgress(pxPart[0].start_time - 0);\r\n    },\r\n    /**\r\n     * 初始化时间轴\r\n     *\r\n     */\r\n    initTimeCount: function() {\r\n        var tempA = [];\r\n        var tempB = [];\r\n        for(var i = 0; i < 24; i++){\r\n            tempA[i] = i;\r\n        }\r\n        this.setState({timeCount: tempA});\r\n        for(var i = 0; i < 25; i++){\r\n            tempB[i] = i;\r\n        }\r\n        this.setState({timeNumber: tempB});\r\n    },\r\n    /**\r\n     * DOM操作回调，拖动时间轴位置\r\n     *\r\n     * @param {object} event 事件对象 \r\n     */\r\n    handleProgressDragEnd: function (event) {\r\n        var that = this;\r\n        if (that.state.totalPointData.length === 0) {\r\n            return;\r\n        }\r\n        $(document).off('mousemove', that.onProgessDrag);\r\n        $(document).off('mouseup', that.onProgressDragMouseUp);\r\n        this.setState({currentProgress: that.state.progress});\r\n        // this.setState({currentTimeStamp: that.getTimeByPx(that.state.progress)});\r\n        // var point = that.getPointByTime(that.getTimeByPx(that.state.progress));\r\n        // if (point.loc_time !== undefined){\r\n        //     that.setRunningPoint(point);\r\n        // }\r\n        that.setRunningPointByProgress(that.state.progress)\r\n    },\r\n    /**\r\n     * DOM操作回调，拖动时间轴位置\r\n     *\r\n     * @param {object} event 事件对象 \r\n     */\r\n    handleProgressDragStart: function (event) {\r\n        var that = this;\r\n        if (that.state.totalPointData.length === 0) {\r\n            return true;\r\n        }\r\n        this.setState({initMouseX: event.clientX});\r\n        $(document).on('mousemove', that.onProgessDrag);\r\n        $(document).on('mouseup', that.onProgressDragMouseUp);\r\n    },\r\n    /**\r\n     * DOM操作回调，播放停止轨迹\r\n     *\r\n     * @param {object} event 事件对象 \r\n     */\r\n    handlePlayOrPause: function (event) {\r\n        if (this.state.totalPointData.length === 0) {\r\n            return;\r\n        }\r\n        window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;\r\n        var that = this;\r\n        var newStatus = '';\r\n        var step = function(timestamp) {\r\n            var speed = that.state.playSpeed[that.state.playSpeedIndex];\r\n            that.setState({progress: that.state.progress + speed});\r\n            that.setState({currentProgress: that.state.currentProgress + speed});\r\n            that.setState({currentPageX: that.state.currentPageX + speed});\r\n            that.setRunningPointByProgress(that.state.progress + speed);\r\n            if (that.state.progress + speed > that.state.caliperBPosition) {\r\n                newStatus = 'timelinePlay';\r\n                that.setState({playOrPause: newStatus});\r\n                return;\r\n            }\r\n            if (that.state.playOrPause === 'timelinePause') {\r\n                requestAnimationFrame(step);\r\n            } \r\n        }\r\n        if (event.target.className === 'timelinePause') {\r\n            newStatus = 'timelinePlay';\r\n        } else {\r\n            newStatus = 'timelinePause';\r\n            requestAnimationFrame(step);\r\n        }\r\n        this.setState({playOrPause: newStatus});\r\n    },\r\n    /**\r\n     * DOM操作回调，加速播放\r\n     *\r\n     * @param {object} event 事件对象 \r\n     */\r\n    handleQuick: function (event) {\r\n        if (this.state.totalPointData.length === 0) {\r\n            return;\r\n        }\r\n        if (this.state.playSpeedIndex === 10) {\r\n\r\n        } else {\r\n            this.setState({playSpeedIndex: this.state.playSpeedIndex + 1});\r\n        }\r\n    },\r\n    /**\r\n     * DOM操作回调，减速播放\r\n     *\r\n     * @param {object} event 事件对象 \r\n     */\r\n    handleSlow: function (event) {\r\n        if (this.state.totalPointData.length === 0) {\r\n            return;\r\n        }\r\n        if (this.state.playSpeedIndex === 0) {\r\n\r\n        } else {\r\n            this.setState({playSpeedIndex: this.state.playSpeedIndex - 1});\r\n        }\r\n    },\r\n\r\n    /**\r\n     * DOM操作回调，点击时间轴跳跃时间\r\n     *\r\n     * @param {object} event 事件对象 \r\n     */\r\n    handleTimelineClick(event) {\r\n        if (this.state.totalPointData.length === 0) {\r\n            return;\r\n        }\r\n        if (event.target.className === 'timelineProgress' || event.target.className.indexOf('caliperPointer') > -1)  {\r\n            return;\r\n        }\r\n        this.jumpTime(event.clientX);\r\n    },\r\n\r\n    /**\r\n     * DOM操作回调，点击时间轴跳跃时间\r\n     *\r\n     * @param {number} clientx 偏移\r\n     */\r\n    jumpTime(clientx) {\r\n        let that = this;\r\n        let x = clientx - $('.timelineMain').offset().left;\r\n        that.setState({progress: x});\r\n        that.setState({currentProgress: x});\r\n        that.setState({currentPageX: clientx});\r\n        that.setRunningPointByProgress(x);\r\n    },\r\n    /**\r\n     * view 内部 拖动事件监听\r\n     *\r\n     * @param {object} event 事件对象 \r\n     */\r\n    onProgessDrag(event) {\r\n        let x = event.clientX - this.state.initMouseX;\r\n        let newProgress = x + this.state.currentProgress;\r\n        if (newProgress >= 0 && newProgress <= this.props.timelineLong) {\r\n            this.setState({progress: newProgress});\r\n        }\r\n        // var point = this.getPointByTime(this.getTimeByPx(newProgress));\r\n        // if (point.loc_time !== undefined){\r\n        //     this.setRunningPoint(point);\r\n        // }\r\n        this.setRunningPointByProgress(newProgress);\r\n        this.handleHoverLabel(event);\r\n    },\r\n    /**\r\n     * view 内部 拖动抬起鼠标\r\n     *\r\n     * @param {object} event 事件对象 \r\n     */\r\n    onProgressDragMouseUp (event) {\r\n        this.handleProgressDragEnd();\r\n        this.setState({currentPageX: event.clientX});\r\n    },\r\n    /**\r\n     * view 内部 根据时间戳获取时间轴像素位置\r\n     *\r\n     * @param {number} time 时间戳 \r\n     * @return {number} 像素位置\r\n     */\r\n    getPxByTime: function(time) {\r\n        var px = 0;\r\n        // 像素 = (当前时间戳 + （北京时区 * 60 * 60））% 一天的秒) / (一个时间轴像素代表的秒数)\r\n        px = (time + 28800) % 86400 / 120;\r\n        return px;\r\n    },\r\n    /**\r\n     * view 内部 根据时间轴位置获取对应数据中时间点\r\n     *\r\n     * @param {number} px 像素位置 \r\n     * @return {number} 时间戳\r\n     */\r\n    getTimeByPx: function(px) {\r\n        var time = 0;\r\n        time = (px) * 120 + this.state.initTimeStamp;\r\n        return time;\r\n    },\r\n    /**\r\n     * view 内部 根据时间获取数据点\r\n     *\r\n     * @param {number} time 时间戳 \r\n     * @return {object} 数据点\r\n     */\r\n    getPointByTime: function(time) {\r\n        var point = {};\r\n        var totalPoint = this.state.totalPointData;\r\n        if (time < totalPoint[0].loc_time) {\r\n            point = totalPoint[0];\r\n            return point;\r\n        }\r\n        if (time > totalPoint[totalPoint.length - 1].loc_time) {\r\n            point = totalPoint[totalPoint.length - 1];\r\n            return point;\r\n        }\r\n        for (var i = 0; i < totalPoint.length - 1; i++){\r\n\r\n            if (time >= totalPoint[i].loc_time && time <= totalPoint[i + 1].loc_time) {\r\n                point = totalPoint[i];\r\n                break;\r\n            }\r\n        }\r\n        return point;\r\n    },\r\n    /**\r\n     * view 内部 根据数据点绘制实时位置\r\n     *\r\n     * @param {object} data 数据点 \r\n     */\r\n    setRunningPoint: function(data) {\r\n        var update = function () {\r\n            let ctx = this.canvas.getContext(\"2d\");\r\n            if (!ctx) {\r\n                return;\r\n            }\r\n            ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n\r\n            let point = new BMap.Point(data.longitude, data.latitude);\r\n            let pixel = map.pointToPixel(point);\r\n            \r\n            ctx.beginPath();\r\n            ctx.strokeStyle = '#d0d4d7'\r\n            ctx.arc(pixel.x, pixel.y, 35, 0, 2 * Math.PI);\r\n            ctx.stroke();\r\n            ctx.beginPath();\r\n            ctx.fillStyle = 'rgba(35, 152, 255, 0.14)';\r\n            ctx.arc(pixel.x, pixel.y, 34, 0, 2 * Math.PI);\r\n            ctx.fill();\r\n            ctx.beginPath();\r\n            ctx.strokeStyle = '#c2c2c4';\r\n            ctx.arc(pixel.x, pixel.y, 8, 0, 2 * Math.PI);\r\n            ctx.stroke();\r\n            ctx.beginPath();\r\n            ctx.fillStyle = '#fff';\r\n            ctx.arc(pixel.x, pixel.y, 7, 0, 2 * Math.PI);\r\n            ctx.fill();\r\n            ctx.beginPath();\r\n            ctx.fillStyle = '#1496ff';\r\n            ctx.arc(pixel.x, pixel.y, 2.6, 0, 2 * Math.PI);\r\n            ctx.fill();\r\n        }\r\n        if(typeof(canvasLayerRunning) != 'undefined') {\r\n            canvasLayerRunning.options.update = update;\r\n            canvasLayerRunning._draw();\r\n            return;\r\n        }\r\n        window.canvasLayerRunning =  new CanvasLayer({\r\n            map: map,\r\n            update: update,\r\n            zIndex: 10\r\n        });\r\n    },\r\n    /**\r\n     * view 内部 根据时间轴位置设置轨迹点位置\r\n     *\r\n     * @param {number} progress 时间戳 \r\n     */\r\n    setRunningPointByProgress(progress) {\r\n        let point = this.getPointByTime(this.getTimeByPx(progress + 0));\r\n        if (point.loc_time !== undefined){\r\n            this.setRunningPoint(point);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * DOM操作回调，鼠标浮动到时间轴上后显示事件label\r\n     *\r\n     * @param {Object} event 事件对象\r\n     */\r\n    handleHoverLabel(event) {\r\n        if (event.target.className.indexOf('caliperPointer') > -1) {\r\n            return;\r\n        }\r\n        let x = event.clientX - $('.timelineMain').offset().left;\r\n        // 一像素两分钟\r\n        let time = x * 120;\r\n        let hour = parseInt(time / (60 * 60), 10);\r\n        let min = parseInt(time % (60 * 60) / 60, 10);\r\n        this.setState({\r\n            labelVisible: 'block'\r\n        });\r\n        if (hour >= 0 && hour <= 24 && min >= 0 && min <= 59 && hour * 100 + min <= 2400) {\r\n            min = min >= 10 ? min : '0' + min;\r\n            this.setState({\r\n                label: x,\r\n                hovertime: hour + ':' + min\r\n            });\r\n        }\r\n    },\r\n\r\n    /**\r\n     * DOM操作回调，鼠标移动开关闭label的显示\r\n     *\r\n     * @param {Object} event 事件对象\r\n     */\r\n    handleOffLabel(event) {\r\n        this.setState({\r\n            labelVisible: 'blank'\r\n        });\r\n    },\r\n\r\n    /**\r\n     * DOM操作回调，点击卡尺\r\n     *\r\n     * @param {Object} event 事件对象\r\n     */\r\n    handleCaliperDragStart(event) {\r\n        if (this.state.totalPointData.length === 0) {\r\n            return;\r\n        }\r\n        let that = this;\r\n        let caluperCurrent = event.target.parentElement.className;\r\n        that.setState({\r\n            caluperCurrent: caluperCurrent\r\n        });\r\n        $(document).on('mousemove', that.handleCaliperDrag);\r\n        $(document).on('mouseup', that.handleCaliperDragEnd);\r\n        $('body').css('user-select', 'none');\r\n    },\r\n\r\n    /**\r\n     * DOM操作回调，拖动卡尺\r\n     *\r\n     * @param {Object} event 事件对象\r\n     */\r\n    handleCaliperDrag(event) {\r\n        let x = event.clientX - $('.timelineMain').offset().left;\r\n        if (x < 0 || x > this.props.timelineLong) {\r\n            return;\r\n        }\r\n        let caluperCurrent = this.state.caluperCurrent;\r\n        if (caluperCurrent === 'caliperA' && x < this.state.caliperBPosition) {\r\n            this.setState({\r\n                caliperAPosition: x\r\n            });\r\n        } else if (caluperCurrent === 'caliperB' && x > this.state.caliperAPosition) {\r\n            this.setState({\r\n                caliperBPosition: x\r\n            });\r\n        }\r\n        this.handleHoverLabel(event);\r\n    },\r\n\r\n    /**\r\n     * DOM操作回调，抬起卡尺\r\n     *\r\n     * @param {Object} event 事件对象\r\n     */\r\n    handleCaliperDragEnd(event) {\r\n        let x = event.clientX - $('.timelineMain').offset().left;\r\n        let clientx = event.clientX;\r\n        if (x < 0) {\r\n            x = 0;\r\n            clientx = $('.timelineMain').offset().left;\r\n        } else if (x >= this.props.timelineLong) {\r\n            x = this.props.timelineLong;\r\n            clientx = $('.timelineMain').offset().left + this.props.timelineLong;\r\n        }\r\n        // 设置卡尺位置\r\n        let caluperCurrent = this.state.caluperCurrent;\r\n        if (caluperCurrent === 'caliperA' && x < this.state.caliperBPosition) {\r\n            this.setState({\r\n                caliperAPosition: x\r\n            });\r\n            let starttime = this.getTimeByPx(x);\r\n            let endtime = this.getTimeByPx(this.state.caliperBPosition);\r\n            TrackAction.changeTimeline(starttime, endtime);\r\n        } else if (caluperCurrent === 'caliperB' && x > this.state.caliperAPosition) {\r\n            this.setState({\r\n                caliperBPosition: x\r\n            });\r\n\r\n            let starttime = this.getTimeByPx(this.state.caliperAPosition);\r\n            let endtime = this.getTimeByPx(x);\r\n            TrackAction.changeTimeline(starttime, endtime);\r\n        }\r\n\r\n        $('body').css('user-select', 'text');\r\n        $(document).off('mousemove', this.handleCaliperDrag);\r\n        $(document).off('mouseup', this.handleCaliperDragEnd);\r\n\r\n\r\n        // 控制播放进度跳转\r\n        if (this.state.caluperCurrent === 'caliperA') {\r\n            this.jumpTime(clientx);\r\n        } else {\r\n            this.jumpTime(this.state.caliperAPosition + $('.timelineMain').offset().left);\r\n        }\r\n\r\n        // 暂定播放\r\n        this.handlePlayOrPause({\r\n            target: {\r\n                className: 'timelinePause'\r\n            }\r\n        });\r\n    },\r\n\r\n    render: function() {\r\n        let timeCount = this.state.timeCount;\r\n        let timeNumber = this.state.timeNumber;\r\n        let handleProgressDragEnd = this.handleProgressDragEnd;\r\n        let progress = this.state.progress;\r\n        let handleProgressDragStart = this.handleProgressDragStart;\r\n        let handleTimelineClick = this.handleTimelineClick;\r\n        let dataPart = this.state.dataPart;\r\n        let playOrPause = this.state.playOrPause;\r\n        let handlePlayOrPause = this.handlePlayOrPause;\r\n        let handleSlow = this.handleSlow;\r\n        let handleQuick = this.handleQuick;\r\n        let tabIndex = this.state.tabIndex;\r\n        let parentVisible = this.state.parentVisible;\r\n        let handleHoverLabel = this.handleHoverLabel;\r\n        let handleOffLabel = this.handleOffLabel;\r\n        let labelVisible = this.state.labelVisible;\r\n        let label = this.state.label;\r\n        let hovertime = this.state.hovertime;\r\n        let handleCaliperDragStart = this.handleCaliperDragStart;\r\n        let caliperAPosition = this.state.caliperAPosition;\r\n        let caliperBPosition = this.state.caliperBPosition;\r\n        let timelineLong = this.props.timelineLong;\r\n        return (\r\n            <div className={tabIndex === 0 ? 'timeline hidden' : 'timeline visible'} style={parentVisible} >\r\n                <div className=\"timelineControl\">\r\n                    <div className={playOrPause} onClick={handlePlayOrPause}>\r\n                    </div>\r\n                    <div className=\"timelineSlow\" onClick={handleSlow}>\r\n                    </div>\r\n                    <div className=\"timelineQuick\" onClick={handleQuick}>\r\n                    </div>\r\n                </div>\r\n                <div className=\"timelineMain\" onClick={handleTimelineClick} onMouseOver={handleHoverLabel} onMouseOut={handleOffLabel}>\r\n                    {\r\n                        timeCount.map(function(item, key){\r\n                            return (\r\n                                <div className={'timeHour' + (key === 0 ? ' timeHourFirst' : '') + (key === 23 ? ' timeHourFinal' : '')} key={key}></div>\r\n                                \r\n                            )\r\n                        })\r\n                    }\r\n                    {\r\n                        timeNumber.map(function(item, key){\r\n                            return (\r\n                                 <div className=\"timeNumber\" key={key} style={{left: key * 29.6 - 1 +'px'}} >{key}</div>\r\n                            )\r\n                        })\r\n                    }\r\n                    <div className=\"timelineProgress\" style={{left: progress + 'px'}}  onMouseDown = {handleProgressDragStart}></div>\r\n                    {\r\n                        dataPart.map(function(item, key){\r\n                            return <div className=\"runPart\" key={key} style={{left: item.start_time + 'px',width: item.end_time - item.start_time + 'px'}}></div>\r\n                        })\r\n                    }\r\n                    <div className={'timelineLabel ' + labelVisible} style={{left: label + 'px'}}>\r\n                        <div className=\"timelineLabelcontent\">\r\n                            {hovertime}\r\n                        </div>\r\n                        <div className=\"timelineLabelpointer\">\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"caliperA\" style={{left: caliperAPosition + 'px'}}>\r\n                        <div className=\"caliperLine\"></div>\r\n                        <div className=\"caliperPointerA\" onMouseDown={handleCaliperDragStart}></div>\r\n                    </div>\r\n                    <div className=\"caliperB\" style={{left: caliperBPosition + 'px'}}>\r\n                        <div className=\"caliperLine\"></div>\r\n                        <div className=\"caliperPointerB\" onMouseDown={handleCaliperDragStart}></div>\r\n                    </div>\r\n                    <div className=\"caliperPartA\" style={{width: caliperAPosition + 'px'}}></div>\r\n                    <div className=\"caliperPartB\" style={{width: timelineLong - caliperBPosition + 'px'}}></div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n});\r\n\r\nexport default Timeline;\r\n"]}
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="Expires" content="-1">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Cache-control" content="no-cache">
<meta http-equiv="Cache" content="no-cache">
<link rel="stylesheet" type="text/css" href="../css/login2.css" />
<link rel="stylesheet" type="text/css"
	href="../css/jquery.datetimepicker.css" />
<script type="text/javascript" src="../js/jquery-3.1.0.min.js"
	charset="UTF-8"></script>
<script type="text/javascript" src="../js/jquery.datetimepicker.full.js"
	charset="UTF-8"></script>
<link rel="SHORTCUT ICON" href="../images/favicon.ico" />

<style type="text/css">
body, div, td, input {
	font-size: 12px;
	margin: 0px;
}

select {
	height: 20px;
	width: 300px;
}

table {
	align: center;
	width: 300;
}

legend {
	font-weight: bold;
}

.title {
	font-size: 16px;
	padding: 10px;
	margin: 10px;
	width: 80%;
}

.text {
	height: 20px;
	width: 300px;
	border: 1px solid #AAAAAA;
}

#dd {
	display: none;
}

.line {
	margin: 2px;
}

.leftDiv {
	width: 110px;
	float: left;
	height: 22px;
	line-height: 22px;
	font-weight: bold;
}

.rightDiv {
	height: 22px;
	line-height: 22px;
}

.button {
	color: #fff;
	font-weight: bold;
	font-size: 11px;
	text-align: center;
	padding: .17em 0 .2em .17em;
	border-style: solid;
	border-width: 1px;
	border-color: #9cf #159 #159 #9cf;
	background: #69c url(images/bg-btn-blue.gif) repeat-x;
}

#button {
	color: #fff;
	font-size: 8px;
	text-align: center;
	padding: .17em 0 .2em .17em;
	border-style: solid;
	border-width: 1px;
	border-color: #9cf #159 #159 #9cf;
	background: #69c url(images/bg-btn-blue.gif) repeat-x;
}
</style>
<title>用户信息</title>
</head>
<body style="text-align: left; font-size: 16px; color: #fff;">
	<br />

	<script type="text/javascript">
	function GetQueryString(name) {
	   var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)","i");
	   var r = window.location.search.substr(1).match(reg);
	   if (r!=null) return (r[2]); 
	   return null;
	}
	var inputName = GetQueryString("name");
	
	$(document).ready(function(){	
		if (null == inputName) {
			inputName = "invalid user name";
		}
		//alert(inputName);
    	//$('#nameDiv').html("修改"+inputName+"信息");
	
    	$("#allday").click(function ()
    	{
    		var status = $("#allday").is(':checked');

    		if(status == true)
    		{
    			$("[name='week']").prop("checked",false);
    			$("[name='week']").prop("disabled", "disabled");//全选 

    		}
    		else
    		{
    			$("[name='week']").prop("disabled",false);//全选 
    		}

	});

		var deveui;
		
		$.ajaxSetup({
			  async: false
			  });
		//获得当前用户名下的一个设备
		$.get("../UsrDevicesManager.do?type=one&usrname=" + inputName, function(data){
				deveui = eval("(" + data + ")");
				getDevParams();
			});
		
		
		//获取当前设备下告警信息 
		function getDevParams(){
			var url = "../WarningManager.do?usrname="+inputName + "&deveui=" + deveui;
	    	$.get(url, function(data, status) {
	    		var usrInfo = eval("(" + data + ")");
	    		var interval = 0;
	    		
	    		$("[name='week']").prop("checked",false);
    			$("#timepicker1").val("");
    			$("#timepicker2").val("");
    			//$("#datetimepicker1").val("");
    			$("#uid1").val("");
    			$("#uid2").val("");
    			
	    		if(usrInfo["warn_inter"] != "not found")
	    		{
	    			$("#timepicker1").val(usrInfo["warn_stime"]);
	    			$("#timepicker2").val(usrInfo["warn_etime"]);
	    			//$("#datetimepicker1").val(usrInfo["warn_sdate"]);
	    			$("#uid1").val(usrInfo["warn_tel1"]);
	    			$("#uid2").val(usrInfo["warn_tel2"]);	    		
	    			interval = usrInfo["warn_inter"];
	    		}
	    		
	    		if(interval == 127)//from Monday to Sunday
	    		{
	    			$("#allday").prop("checked",true);
	    			$("[name='week']").prop("checked",false);
	    			$("[name='week']").prop("disabled", "disabled");//全选 
	    			
	    		}
	    		else
	    		{
	    			$("#allday").prop("checked",false);
	    			$("[name='week']").prop("disabled",false);//全选 

	    			$('input:checkbox[name=week]').each(function(i){
	    				if(interval & parseInt($(this).val()))
	    				{
	    					$(this).prop("checked",true);
	    				}
	    		   }); 
	    		}
	    	});
	    	
	    	
	    	//获取当前设备下的通信设置模式
			var url1 = "../DevCommSetting.do?deveui="+ deveui;
			$.get(url1, function(data, status) {
				
	    		var usrInfo1 = eval("(" + data + ")");
	    		var srate = usrInfo1["MODE"];
	    		var sweep = usrInfo1["RFU"];
	    		var sADR = usrInfo1["ADR"];
	    		var speed = usrInfo1["DR"];
	    		var str1 = "DR";
	    		var str = str1 + speed;
	    		var spower = usrInfo1["POWER"];
	    		var spObj4 = $("#speed");
				var pwObj4 = $("#power");
	    		
	    		//获取速率制式
	    		if (srate <= 0){
	    			//速率制式为空的情况下 
	    			$('#rate option:eq(0)').attr('selected',true);
	    			$('#sweep option:eq(0)').attr('selected',true);
	    			$("input[value='off']").attr('checked',true);
	    			$('#speed option:eq(0)').attr('selected',true);
	    			$('#power option:eq(0)').attr('selected',true);
	    			
	    			//速率制式不为空的情况下
	        		}else{
	    			var spObj = $("#rate");
	    			 spObj.empty();
			    	 $("#rate").prop('disabled',false);
			    	 var rt = [
							{"value":"0","text":""},
							{"value":"1","text":"AU920"},
							{"value":"2","text":"CLAA"},
							{"value":"3","text":"CN470"},
							{"value":"4","text":"AS923"},
							{"value":"5","text":"EU434"},
							{"value":"6","text":"EU868"},
							{"value":"7","text":"US915"}
							];
				var ra =0;
				for( ; ra <= rt.length-1;ra++){
					 spObj.append("<option value='"+rt[ra].value+"'>"+rt[ra].text+"</option>");	
				}
				var re = 0;
				for( ; re <= rt.length-1;re++){
					if(rt[re].value == srate)
						$("#rate").val(rt[re].value);
	        		}
	    			$("#sweep").val(" ");
	    			$("#sweep").prop('disabled',true);
	    			
				if(srate == 2){
	    			//速率制式为 CALL时,获取扫屏模式 
	    			var spObj1 = $("#sweep");
	    			 spObj1.empty();
			    	 $("#sweep").prop('disabled',false);
	    			var sw = [
						{"value":"0","text":""},
						{"value":"1","text":"A模式"},
						{"value":"2","text":"B模式"},
						{"value":"3","text":"C模式"},
						{"value":"4","text":"D模式"},
						{"value":"5","text":"E模式"},
						{"value":"6","text":"全屏扫描"}
						];
			var sp =0;
			for( ; sp <= sw.length-1;sp++){
				 spObj1.append("<option value='"+sw[sp].value+"'>"+sw[sp].text+"</option>");	
	        		}
			var wp = 0;
			for( ; wp <= sw.length-1;wp++){
				if(sw[wp].value == sweep)
					$("#sweep").val(sw[wp].value);
	    		}
	    			
	    		}
	    		 
	    		//添加速率、功率选项    
	    		if(srate == 1 || srate == 7){
			    	 spObj4.empty();
			    	 $("#speed").prop('disabled',false);
			    	 
			    	 var data4 = [
							{"value6":"a0","text6":""},
							{"value6":"a1","text6":"DR0"},
							{"value6":"a2","text6":"DR1"},
							{"value6":"a3","text6":"DR2"},
							{"value6":"a4","text6":"DR3"},
							{"value6":"a5","text6":"DR4"},
							{"value6":"a8","text6":"DR8"},
							{"value6":"a9","text6":"DR9"},
							{"value6":"a10","text6":"DR10"},
							{"value6":"a11","text6":"DR11"},
							{"value6":"a12","text6":"DR12"},
							{"value6":"a13","text6":"DR13"}
							];
			    	 var k3 = 0; 
						for( ; k3 <= data4.length-1;k3++){
							 spObj4.append("<option value='"+data4[k3].value6+"'>"+data4[k3].text6+"</option>");	
						}
						
						pwObj4.empty();	
						var arr4 = [
							{"value6":"p0","text6":""},
							{"value6":"p30","text6":"30"},
							{"value6":"p28","text6":"28"},
							{"value6":"p26","text6":"26"},
							{"value6":"p24","text6":"24"},
							{"value6":"p22","text6":"22"},
							{"value6":"p20","text6":"20"},
							{"value6":"p18","text6":"18"},
							{"value6":"p16","text6":"16"},
							{"value6":"p14","text6":"14"},
							{"value6":"p12","text6":"12"},
							{"value6":"p10","text6":"10"}
							];
						
					    var p3 =0;
						for( ; p3 <= arr4.length-1;p3++){
							 pwObj4.append("<option value='"+arr4[p3].value6+"'>"+arr4[p3].text6+"</option>");	
						}
				     }else if (srate == 4){
				    	 spObj4.empty();
				    	 $("#speed").prop('disabled',false);
				    	 var data3 = [
								{"value3":"a0","text3":""},
								{"value3":"a1","text3":"DR0"},
								{"value3":"a2","text3":"DR1"},
								{"value3":"a3","text3":"DR2"},
								{"value3":"a4","text3":"DR3"},
								{"value3":"a5","text3":"DR4"},
								{"value3":"a6","text3":"DR5"},
								{"value3":"a7","text3":"DR6"}
								];
				    	 var k2 = 0; 
							for( ; k2 <= data3.length-1;k2++){
								 spObj4.append("<option value='"+data3[k2].value3+"'>"+data3[k2].text3+"</option>");	
							}
							pwObj4.empty();	
							var arr3 = [
								{"value5":"p0","text5":""},
								{"value5":"p16","text5":"16"},
								{"value5":"p14","text5":"14"},
								{"value5":"p12","text5":"12"},
								{"value5":"p10","text5":"10"},
								{"value5":"p8","text5":"8"},
								{"value5":"p6","text5":"6"},
								{"value5":"p4","text5":"4"},
								{"value5":"p2","text5":"2"}
								];
						    var p2 =0;
							for( ; p2 <= arr3.length-1;p2++){
								 pwObj4.append("<option value='"+arr3[p2].value5+"'>"+arr3[p2].text5+"</option>");	
							}		
				     }else if (srate == 5){
				    	 spObj4.empty();
				    	 $("#speed").prop('disabled',false);
				    	 var data3 = [
								{"value3":"a0","text3":""},
								{"value3":"a1","text3":"DR0"},
								{"value3":"a2","text3":"DR1"},
								{"value3":"a3","text3":"DR2"},
								{"value3":"a4","text3":"DR3"},
								{"value3":"a5","text3":"DR4"},
								{"value3":"a6","text3":"DR5"},
								{"value3":"a7","text3":"DR6"}
								];
				    	 var k2 = 0; 
							for( ; k2 <= data3.length-1;k2++){
								 spObj4.append("<option value='"+data3[k2].value3+"'>"+data3[k2].text3+"</option>");	
							}
							pwObj4.empty();	
							var arr3 = [
								{"value5":"p0","text5":""},
								{"value5":"p12","text5":"12"},
								{"value5":"p10","text5":"10"},
								{"value5":"p8","text5":"8"},
								{"value5":"p6","text5":"6"},
								{"value5":"p4","text5":"4"},
								{"value5":"p2","text5":"2"}
								];
						    var p2 =0;
							for( ; p2 <= arr3.length-1;p2++){
								 pwObj4.append("<option value='"+arr3[p2].value5+"'>"+arr3[p2].text5+"</option>");	
							}		
				     }else if(srate == 2){
				    	 spObj4.empty();
				    	 $("#speed").prop('disabled',false);
				    	 var data = [
								{"value":"a0","text":""},
								{"value":"a1","text":"DR0"},
								{"value":"a2","text":"DR1"},
								{"value":"a3","text":"DR2"},
								{"value":"a4","text":"DR3"},
								{"value":"a5","text":"DR4"},
								{"value":"a6","text":"DR5"}
								];
				    	    var i = 0;
							for( ; i <= data.length-1;i++){
								 spObj4.append("<option value='"+data[i].value+"'>"+data[i].text+"</option>");	
							}
							
							pwObj4.empty();
							var arr = [
								{"value1":"p0","text1":""},
								{"value1":"p20","text1":"20"},
								{"value1":"p18","text1":"18"},
								{"value1":"p16","text1":"16"},
								{"value1":"p14","text1":"14"},
								{"value1":"p12","text1":"12"},
								{"value1":"p10","text1":"10"},
								{"value1":"p8","text1":"8"},
								{"value1":"p6","text1":"6"}
								];
							
						    var j =0;
						    
							for( ; j <= arr.length-1;j++){
								 pwObj4.append("<option value='"+arr[j].value1+"'>"+arr[j].text1+"</option>");	
							}
				     }else if(srate == 3){
				    	 spObj4.empty();
				    	 $("#speed").prop('disabled',false);
				    		var data1 = [
								{"value2":"a0","text2":""},
								{"value2":"a1","text2":"DR0"},
								{"value2":"a2","text2":"DR1"},
								{"value2":"a3","text2":"DR2"},
								{"value2":"a4","text2":"DR3"},
								{"value2":"a5","text2":"DR4"},
								{"value2":"a6","text2":"DR5"}
								];
				    		var k = 0; 
							for( ; k <= data1.length-1;k++){
								 spObj4.append("<option value='"+data1[k].value2+"'>"+data1[k].text2+"</option>");	
							}
							
							pwObj4.empty();	
							var arr1 = [
								{"value3":"p0","text3":""},
								{"value3":"p20","text3":"20"},
								{"value3":"p18","text3":"18"},
								{"value3":"p16","text3":"16"},
								{"value3":"p14","text3":"14"},
								{"value3":"p12","text3":"12"},
								{"value3":"p10","text3":"10"},
								{"value3":"p8","text3":"8"},
								{"value3":"p6","text3":"6"}
								];
						    var p =0;
							for( ; p <= arr1.length-1;p++){
								 pwObj4.append("<option value='"+arr1[p].value3+"'>"+arr1[p].text3+"</option>");	
							}	
				     }else{
				    	 spObj4.empty();
				    	 $("#speed").prop('disabled',false);
				    	 var data2 = [
								{"value3":"a0","text3":""},
								{"value3":"a1","text3":"DR0"},
								{"value3":"a2","text3":"DR1"},
								{"value3":"a3","text3":"DR2"},
								{"value3":"a4","text3":"DR3"},
								{"value3":"a5","text3":"DR4"},
								{"value3":"a6","text3":"DR5"},
								{"value3":"a7","text3":"DR6"}
								];
				    	 var k1 = 0; 
							for( ; k1 <= data2.length-1;k1++){
								 spObj4.append("<option value='"+data2[k1].value3+"'>"+data2[k1].text3+"</option>");	
							}
							pwObj4.empty();	
							var arr2 = [
								{"value4":"p0","text4":""},
								{"value4":"p16","text4":"16"},
								{"value4":"p14","text4":"14"},
								{"value4":"p12","text4":"12"},
								{"value4":"p10","text4":"10"},
								{"value4":"p8","text4":"8"},
								{"value4":"p6","text4":"6"},
								{"value4":"p4","text4":"4"},
								{"value4":"p2","text4":"2"}
								];
	    			
						    var p1 =0;
							for( ; p1 <= arr2.length-1;p1++){
								 pwObj4.append("<option value='"+arr2[p1].value4+"'>"+arr2[p1].text4+"</option>");	
							}	
	    		}
	    		
	    		//获取速率自适应
	    		if(sADR == 0){
	    			$("input[value='no']").prop('checked', false);
	    			$("input[value='off']").prop('checked',true);
	    		}
		    	else{
		    		$("input[value='off']").prop('checked', false);
		    		$("input[value='no']").prop('checked',true);
		    	}		
	    			var da = [
								{"value":"a0","text":""},
								{"value":"a1","text":"DR0"},
								{"value":"a2","text":"DR1"},
								{"value":"a3","text":"DR2"},
								{"value":"a4","text":"DR3"},
								{"value":"a5","text":"DR4"},
								{"value":"a6","text":"DR5"},
								{"value":"a7","text":"DR6"},
								{"value":"a8","text":"DR8"},
								{"value":"a9","text":"DR9"},
								{"value":"a10","text":"DR10"},
								{"value":"a11","text":"DR11"},
								{"value":"a12","text":"DR12"},
								{"value":"a13","text":"DR13"}
								];
	    			var daa =0;
					for( ; daa <= da.length-1;daa++){
						if(da[daa].text == str)
							$("#speed").val(da[daa].value);
					}
	    		//}
	    		//else{
	    			//$("input[value='off']").attr('checked', false);
	    			//$("input[value='no']").attr('checked',true);
	    			//spObj4.empty();
			    	//$("#speed").val(" ");
					//$("#speed").prop('disabled',true);
	    		//}
	    		

	    		//获取功率 
	    		var da1 = [
	    			{"valu":"p0","text":""},
					{"valu":"p20","text":"20"},
					{"valu":"p14","text":"14"},
					{"valu":"p11","text":"11"},
					{"valu":"p8","text":"8"},
					{"valu":"p6","text":"6"},
					{"valu":"p2","text":"2"},
					{"valu":"p17","text":"17"},
					{"valu":"p16","text":"16"},
					{"valu":"p30","text":"30"},
					{"valu":"p12","text":"12"},
					{"valu":"p10","text":"10"},
					{"valu":"p7","text":"7"},
					{"valu":"p1","text":"1"},
					{"valu":"p28","text":"28"},
					{"valu":"p26","text":"26"},
					{"valu":"p24","text":"24"},
					{"valu":"p22","text":"22"},
					{"valu":"p18","text":"18"},
					{"valu":"p4","text":"4"}
					];
		var daa1 =0;
		for( ; daa1 <= da1.length-1;daa1++){
			if(da1[daa1].text == spower)
				$("#power").val(da1[daa1].valu);
		}
	    }	 
	    		
/* 		$(function(){
		    $("input:radio[name='no']").click(function(){
		    var id= $('input:radio[name="no"]:checked').attr("id");
		    if (id == "1"){
		    	 spObj4.empty();
		    	 $("#speed").val(" ");
				 $("#speed").prop('disabled',true);
		    }else if(id == "0"){
		    	 if(srate == 1 || srate == 7){
			    	 spObj4.empty();
			    	 $("#speed").prop('disabled',false);
			    	 
			    	 var data4 = [
							{"value6":"a0","text6":""},
							{"value6":"a1","text6":"DR0"},
							{"value6":"a2","text6":"DR1"},
							{"value6":"a3","text6":"DR2"},
							{"value6":"a4","text6":"DR3"},
							{"value6":"a5","text6":"DR4"},
							{"value6":"a8","text6":"DR8"},
							{"value6":"a9","text6":"DR9"},
							{"value6":"a10","text6":"DR10"},
							{"value6":"a11","text6":"DR11"},
							{"value6":"a12","text6":"DR12"},
							{"value6":"a13","text6":"DR13"}
							];
			    	 var k3 = 0; 
						for( ; k3 <= data4.length-1;k3++){
							 spObj4.append("<option value='"+data4[k3].value6+"'>"+data4[k3].text6+"</option>");	
						}
		    	 }else if (srate == 4 || srate == 5){
			    	 spObj4.empty();
			    	 $("#speed").prop('disabled',false);
			    	 var data3 = [
							{"value3":"a0","text3":""},
							{"value3":"a1","text3":"DR0"},
							{"value3":"a2","text3":"DR1"},
							{"value3":"a3","text3":"DR2"},
							{"value3":"a4","text3":"DR3"},
							{"value3":"a5","text3":"DR4"},
							{"value3":"a6","text3":"DR5"},
							{"value3":"a7","text3":"DR6"}
							];
			    	 var k2 = 0; 
						for( ; k2 <= data3.length-1;k2++){
							 spObj4.append("<option value='"+data3[k2].value3+"'>"+data3[k2].text3+"</option>");	
						}  
		    	 }else if(srate == 2){
			    	 spObj4.empty();
			    	 $("#speed").prop('disabled',false);
			    	 var data = [
							{"value":"a0","text":""},
							{"value":"a1","text":"DR0"},
							{"value":"a2","text":"DR1"},
							{"value":"a3","text":"DR2"},
							{"value":"a4","text":"DR3"},
							{"value":"a5","text":"DR4"},
							{"value":"a6","text":"DR5"}
							];
			    	    var i = 0;
						for( ; i <= data.length-1;i++){
							 spObj4.append("<option value='"+data[i].value+"'>"+data[i].text+"</option>");	
						}
		    	 }else if(srate == 3){
			    	 spObj4.empty();
			    	 $("#speed").prop('disabled',false);
			    		var data1 = [
							{"value2":"a0","text2":""},
							{"value2":"a1","text2":"DR0"},
							{"value2":"a2","text2":"DR1"},
							{"value2":"a3","text2":"DR2"},
							{"value2":"a4","text2":"DR3"},
							{"value2":"a5","text2":"DR4"},
							{"value2":"a6","text2":"DR5"}
							];
			    		var k = 0; 
						for( ; k <= data1.length-1;k++){
							 spObj4.append("<option value='"+data1[k].value2+"'>"+data1[k].text2+"</option>");	
						}
		    	 }else{
			    	 spObj4.empty();
			    	 $("#speed").prop('disabled',false);
			    	 var data2 = [
							{"value3":"a0","text3":""},
							{"value3":"a1","text3":"DR0"},
							{"value3":"a2","text3":"DR1"},
							{"value3":"a3","text3":"DR2"},
							{"value3":"a4","text3":"DR3"},
							{"value3":"a5","text3":"DR4"},
							{"value3":"a6","text3":"DR5"},
							{"value3":"a7","text3":"DR6"}
							];
			    	 var k1 = 0; 
						for( ; k1 <= data2.length-1;k1++){
							 spObj4.append("<option value='"+data2[k1].value3+"'>"+data2[k1].text3+"</option>");	
						}
		    	 }
		        }
			}); 
		}); */
	    	});
	    	
	    	//获取当前设备下的工作模式
			var url2 = "../DevWorkSetting.do?deveui="+ deveui;
	    	$.get(url2, function(data, status) {
	    		var usrInfo2 = eval("(" + data + ")");
	    		var id1 = usrInfo2["LOSTPOINT"];
	    		var id2 = usrInfo2["SELFADAPT"];
	    		var id3 = usrInfo2["ONEOFF"];
	    		var id4 = usrInfo2["ALREPORT"];
	    		if (id1 == 1){
	    			$("input:radio[value='off1']").prop('checked', false);
	    			$("input:radio[value='no1']").prop('checked',true);
	    		}else if(id1 == 0){
	    			$("input:radio[value='no1']").prop('checked', false);
	    			$("input:radio[value='off1']").prop('checked',true);
	    		}
	    		if(id2 == 1){
	    			$("input:radio[value='off2']").prop('checked', false);
	    			$("input:radio[value='no2']").prop('checked',true);
	    		}else if(id2 == 0){
	    			$("input:radio[value='no2']").prop('checked', false);
	    			$("input:radio[value='off2']").prop('checked',true);
	    		}
	            if(id3 == 1){
	            	$("input:radio[value='off3']").prop('checked', false);
	            	$("input:radio[value='no3']").prop('checked',true);
	            }else if(id3 == 0){
	            	$("input:radio[value='no3']").prop('checked', false);
	            	$("input:radio[value='off3']").prop('checked',true);
	            }
	            if(id4 == 1){
	            	$("input:radio[value='off4']").prop('checked', false);
	            	$("input:radio[value='no4']").prop('checked',true);
	            }else if(id4 == 0){
	            	$("input:radio[value='no4']").prop('checked', false);
	            	$("input:radio[value='off4']").prop('checked',true);
	            }
	    		$("#week1").val(usrInfo2["GPS"]);
				$("#week2").val(usrInfo2["HB"]);	 
	    	});
		}
	});
	
	//检查告警信息
	function checkInput() {
		//var devsel = $("#devsel").val();
		//if (devsel <= 0) {
		//	alert("请选择设备！");
		//	return false;
		//}
		
		//Check 告警周期
		var warning_interval = 0;
		var status = $("#allday").is(':checked');
		if(status == true)
		{
			warning_interval = 127;
		}
		else
		{
			$('input:checkbox[name=week]:checked').each(function(i){
				warning_interval += parseInt($(this).val());
			      }); 
		}
		
		if(warning_interval == 0)
		{
			alert("请选择告警周期!");
			return false;
		}
		
		//Check告警时间
		var timepicker1 = $("#timepicker1").val();
		if ("" == timepicker1) {
			alert("请输入告警起始时间！");
			return false;
		}
		var timepicker2 = $("#timepicker2").val();
		if ("" == timepicker2) {
			alert("请输入告警终止时间！");
			return false;
		}
		
		if(timepicker1 >  timepicker2)
		{
			alert("起始时间不能大于终止时间！");
			return false;
		}
		
		//Check生效日期
		//var datetimepicker1 = $("#datetimepicker1").val();
		//if("" == datetimepicker1)
		//{
		//	alert("请选择生效日期！");
		//	return false;
		//}
		
		var updatewarn = {
				 usrname: inputName,
				// deveui: $("#devsel").find("option:selected").text(),
				 warn_inter: warning_interval,
				 warn_stime: $("#timepicker1").val(),
				 warn_etime: $("#timepicker2").val(),
				 //warn_sdate: $("#datetimepicker1").val(),
				 warn_tel1:  $("#uid1").val(),
				 warn_tel2:  $("#uid2").val()				 
				};
		//调用AJAX 
		$.ajax(
			{
				async: false,
				type: "POST",
				url: "../UpdateUserDevWarningSetting.do",
				data: updatewarn,
				success: function(data) {
				    var status = eval("("+data+")");
				    if (status == "ok") {				    					 			    					 
				    	alert("数据更新成功！");	    					
						}
				    else if(status == "fail"){
						alert("设备未上线 ！" + status);
					}
				    else{
				    	alert("没有设备存在 ！" + status);
					}
				   }		
	       });
		return true;
	}
	
	
	//通信设置之速率模式转换
     function change(){
		rate1 = $("#rate").val();
		
		//CLAA
		if(rate1 == 2){
			var spObj = $("#speed");
			var pwObj = $("#power");
			$("#sweep").val(" ");
			$("#sweep").prop('disabled',false);
			
			spObj.empty();
	    	 $("#speed").prop('disabled',false);
	    	 var data = [
					{"value":"a0","text":""},
					{"value":"a1","text":"DR0"},
					{"value":"a2","text":"DR1"},
					{"value":"a3","text":"DR2"},
					{"value":"a4","text":"DR3"},
					{"value":"a5","text":"DR4"},
					{"value":"a6","text":"DR5"}
					];
	    	    var i = 0;
				for( ; i <= data.length-1;i++){
					 spObj.append("<option value='"+data[i].value+"'>"+data[i].text+"</option>");	
				}
			//按钮选择判断 
			
			/* $("input[type='radio']").each(function(){
				   var id= $(this).attr("id");
				   if($("#"+id).attr("checked")=="checked"){
				     var fs=$("#"+id).val();
				   }
				   var id= $('input:radio[name="no"]:checked').attr("id");
				    if (id == "1"){
				    	 spObj.empty();
				    	 $("#speed").val(" ");
						 $("#speed").prop('disabled',true);
				     }
				     else if(id == "0"){
				    	 spObj.empty();
				    	 $("#speed").prop('disabled',false);
				    	 var data = [
								{"value":"a0","text":""},
								{"value":"a1","text":"DR0"},
								{"value":"a2","text":"DR1"},
								{"value":"a3","text":"DR2"},
								{"value":"a4","text":"DR3"},
								{"value":"a5","text":"DR4"},
								{"value":"a6","text":"DR5"}
								];
				    	    var i = 0;
							for( ; i <= data.length-1;i++){
								 spObj.append("<option value='"+data[i].value+"'>"+data[i].text+"</option>");	
							}	
				     }    
				  }); */
			//var s1 = $(".aa:checked").val(); 
			//var s2 = $("input[name='no']:checked").val();
			
/* 			$(function(){
			    $("input:radio[name='no']").click(function(){
			    var id= $('input:radio[name="no"]:checked').attr("id");
			    if (id == "1"){
			    	 spObj.empty();
			    	 $("#speed").val(" ");
					 $("#speed").prop('disabled',true);
			     }
			     else if(id == "0"){
			    	 spObj.empty();
			    	 $("#speed").prop('disabled',false);
			    	 var data = [
							{"value":"a0","text":""},
							{"value":"a1","text":"DR0"},
							{"value":"a2","text":"DR1"},
							{"value":"a3","text":"DR2"},
							{"value":"a4","text":"DR3"},
							{"value":"a5","text":"DR4"},
							{"value":"a6","text":"DR5"}
							];
			    	    var i = 0;
						for( ; i <= data.length-1;i++){
							 spObj.append("<option value='"+data[i].value+"'>"+data[i].text+"</option>");	
						}	
			     }    
			    });
			}); */   
			
			pwObj.empty();
			var arr = [
				{"value1":"p0","text1":""},
				{"value1":"p20","text1":"20"},
				{"value1":"p18","text1":"18"},
				{"value1":"p16","text1":"16"},
				{"value1":"p14","text1":"14"},
				{"value1":"p12","text1":"12"},
				{"value1":"p10","text1":"10"},
				{"value1":"p8","text1":"8"},
				{"value1":"p6","text1":"6"}
				];
			
		    var j =0;
		    
			for( ; j <= arr.length-1;j++){
				 pwObj.append("<option value='"+arr[j].value1+"'>"+arr[j].text1+"</option>");	
			}
		}
		
		//CN470
		else if (rate1 == 3){
			$("#sweep").val(" ");
			$("#sweep").prop('disabled',true);
			var spObj1 = $("#speed");
			var pwObj1 = $("#power");
			
	    	 spObj1.empty();
	    	 $("#speed").prop('disabled',false);
	    		var data1 = [
					{"value2":"a0","text2":""},
					{"value2":"a1","text2":"DR0"},
					{"value2":"a2","text2":"DR1"},
					{"value2":"a3","text2":"DR2"},
					{"value2":"a4","text2":"DR3"},
					{"value2":"a5","text2":"DR4"},
					{"value2":"a6","text2":"DR5"}
					];
	    		var k = 0; 
				for( ; k <= data1.length-1;k++){
					 spObj1.append("<option value='"+data1[k].value2+"'>"+data1[k].text2+"</option>");	
				}
			//按钮选择判断 
			
/* 			$("input[type='radio']").each(function(){
				   var id= $(this).attr("id");
				   if($("#"+id).attr("checked")=="checked"){
				     var fs=$("#"+id).val();
				   }
				   var id= $('input:radio[name="no"]:checked').attr("id");
				    if (id == "1"){
				    	 spObj1.empty();
				    	 $("#speed").val(" ");
						 $("#speed").prop('disabled',true);
				     }else if(id == "0"){
				    	 spObj1.empty();
				    	 $("#speed").prop('disabled',false);
				    		var data1 = [
								{"value2":"a0","text2":""},
								{"value2":"a1","text2":"DR0"},
								{"value2":"a2","text2":"DR1"},
								{"value2":"a3","text2":"DR2"},
								{"value2":"a4","text2":"DR3"},
								{"value2":"a5","text2":"DR4"},
								{"value2":"a6","text2":"DR5"}
								];
				    		var k = 0; 
							for( ; k <= data1.length-1;k++){
								 spObj1.append("<option value='"+data1[k].value2+"'>"+data1[k].text2+"</option>");	
							}
				     }    
				  });
			//var s1 = $(".aa:checked").val(); 
			//var s2 = $("input[name='no']:checked").val();
			
			$(function(){
			   $("input[type='radio']").click(function(){
			    var id= $('input:radio[name="no"]:checked').attr("id");
			    if (id == "1"){
			    	 spObj1.empty();
			    	 $("#speed").val(" ");
					 $("#speed").prop('disabled',true);
			     }else if(id == "0"){
			    	 spObj1.empty();
			    	 $("#speed").prop('disabled',false);
			    		var data1 = [
							{"value2":"a0","text2":""},
							{"value2":"a1","text2":"DR0"},
							{"value2":"a2","text2":"DR1"},
							{"value2":"a3","text2":"DR2"},
							{"value2":"a4","text2":"DR3"},
							{"value2":"a5","text2":"DR4"},
							{"value2":"a6","text2":"DR5"}
							];
			    		var k = 0; 
						for( ; k <= data1.length-1;k++){
							 spObj1.append("<option value='"+data1[k].value2+"'>"+data1[k].text2+"</option>");	
						}
			     }    
			    });
			});  */  
			    		
			pwObj1.empty();	
			var arr1 = [
				{"value3":"p0","text3":""},
				{"value3":"p20","text3":"20"},
				{"value3":"p18","text3":"18"},
				{"value3":"p16","text3":"16"},
				{"value3":"p14","text3":"14"},
				{"value3":"p12","text3":"12"},
				{"value3":"p10","text3":"10"},
				{"value3":"p8","text3":"8"},
				{"value3":"p6","text3":"6"}
				];
		    var p =0;
			for( ; p <= arr1.length-1;p++){
				 pwObj1.append("<option value='"+arr1[p].value3+"'>"+arr1[p].text3+"</option>");	
			}
		}
		
		//EU868
		else if (rate1 == 6){
			$("#sweep").val(" ");
			$("#sweep").prop('disabled',true);
			var spObj2 = $("#speed");
			var pwObj2 = $("#power");
	    	 spObj2.empty();
	    	 $("#speed").prop('disabled',false);
	    	 var data2 = [
					{"value3":"a0","text3":""},
					{"value3":"a1","text3":"DR0"},
					{"value3":"a2","text3":"DR1"},
					{"value3":"a3","text3":"DR2"},
					{"value3":"a4","text3":"DR3"},
					{"value3":"a5","text3":"DR4"},
					{"value3":"a6","text3":"DR5"},
					{"value3":"a7","text3":"DR6"}
					];
	    	 var k1 = 0; 
				for( ; k1 <= data2.length-1;k1++){
					 spObj2.append("<option value='"+data2[k1].value3+"'>"+data2[k1].text3+"</option>");	
				}
			//按钮选择判断 
			/* $("input[type='radio']").each(function(){
				   var id= $(this).attr("id");
				   if($("#"+id).attr("checked")=="checked"){
				     var fs=$("#"+id).val();
				   }
				   var id= $('input:radio[name="no"]:checked').attr("id");
				    if (id == "1"){
				    	 spObj2.empty();
				    	 $("#speed").val(" ");
						 $("#speed").prop('disabled',true);
				    }else if(id == "0"){
				    	 spObj2.empty();
				    	 $("#speed").prop('disabled',false);
				    	 var data2 = [
								{"value3":"a0","text3":""},
								{"value3":"a1","text3":"DR0"},
								{"value3":"a2","text3":"DR1"},
								{"value3":"a3","text3":"DR2"},
								{"value3":"a4","text3":"DR3"},
								{"value3":"a5","text3":"DR4"},
								{"value3":"a6","text3":"DR5"},
								{"value3":"a7","text3":"DR6"}
								];
				    	 var k1 = 0; 
							for( ; k1 <= data2.length-1;k1++){
								 spObj2.append("<option value='"+data2[k1].value3+"'>"+data2[k1].text3+"</option>");	
							}
					    }    
				  });
		//	var s1 = $(".aa:checked").val(); 
		//	var s2 = $("input[name='no']:checked").val();
			
			$(function(){
			    $("input[type='radio']").click(function(){
			    var id= $('input:radio[name="no"]:checked').attr("id");
			    if (id == "1"){
			    	 spObj2.empty();
			    	 $("#speed").val(" ");
					 $("#speed").prop('disabled',true);
			    }else if(id == "0"){
			    	 spObj2.empty();
			    	 $("#speed").prop('disabled',false);
			    	 var data2 = [
							{"value3":"a0","text3":""},
							{"value3":"a1","text3":"DR0"},
							{"value3":"a2","text3":"DR1"},
							{"value3":"a3","text3":"DR2"},
							{"value3":"a4","text3":"DR3"},
							{"value3":"a5","text3":"DR4"},
							{"value3":"a6","text3":"DR5"},
							{"value3":"a7","text3":"DR6"}
							];
			    	 var k1 = 0; 
						for( ; k1 <= data2.length-1;k1++){
							 spObj2.append("<option value='"+data2[k1].value3+"'>"+data2[k1].text3+"</option>");	
						}
				    }    
				    });
				});   */
			
			pwObj2.empty();	
			var arr2 = [
				{"value4":"p0","text4":""},
				{"value4":"p16","text4":"16"},
				{"value4":"p14","text4":"14"},
				{"value4":"p12","text4":"12"},
				{"value4":"p10","text4":"10"},
				{"value4":"p8","text4":"8"},
				{"value4":"p6","text4":"6"}
				];
			
		    var p1 =0;
			for( ; p1 <= arr2.length-1;p1++){
				 pwObj2.append("<option value='"+arr2[p1].value4+"'>"+arr2[p1].text4+"</option>");	
			}
		}
		
		//AS923  EU434
		else if (rate1 == 4 || rate1 == 5){
			$("#sweep").val(" ");
			$("#sweep").prop('disabled',true);
			var spObj3 = $("#speed");
			var pwObj3 = $("#power");
	    	 spObj3.empty();
	    	 $("#speed").prop('disabled',false);
	    	 var data3 = [
					{"value3":"a0","text3":""},
					{"value3":"a1","text3":"DR0"},
					{"value3":"a2","text3":"DR1"},
					{"value3":"a3","text3":"DR2"},
					{"value3":"a4","text3":"DR3"},
					{"value3":"a5","text3":"DR4"},
					{"value3":"a6","text3":"DR5"},
					{"value3":"a7","text3":"DR6"}
					];
	    	 var k2 = 0; 
				for( ; k2 <= data3.length-1;k2++){
					 spObj3.append("<option value='"+data3[k2].value3+"'>"+data3[k2].text3+"</option>");	
				}
			//按钮选择判断 
/* 			$("input[type='radio']").each(function(){
				   var id= $(this).attr("id");
				   if($("#"+id).attr("checked")=="checked"){
				     var fs=$("#"+id).val();
				   }
				   var id= $('input:radio[name="no"]:checked').attr("id");
				     //alert(id);
				    if (id == "1"){
				    	 spObj3.empty();
				    	 $("#speed").val(" ");
						 $("#speed").prop('disabled',true);
				    }else if(id == "0"){
				    	 spObj3.empty();
				    	 $("#speed").prop('disabled',false);
				    	 var data3 = [
								{"value3":"a0","text3":""},
								{"value3":"a1","text3":"DR0"},
								{"value3":"a2","text3":"DR1"},
								{"value3":"a3","text3":"DR2"},
								{"value3":"a4","text3":"DR3"},
								{"value3":"a5","text3":"DR4"},
								{"value3":"a6","text3":"DR5"},
								{"value3":"a7","text3":"DR6"}
								];
				    	 var k2 = 0; 
							for( ; k2 <= data3.length-1;k2++){
								 spObj3.append("<option value='"+data3[k2].value3+"'>"+data3[k2].text3+"</option>");	
							}
					    }    
				  });
			//var s1 = $(".aa:checked").val(); 
			//var s2 = $("input[name='no']:checked").val();
			
			$(function(){
			    $("input[type='radio']").click(function(){
			    var id= $('input:radio[name="no"]:checked').attr("id");
			    // alert(id);
			    if (id == "1"){
			    	 spObj3.empty();
			    	 $("#speed").val(" ");
					 $("#speed").prop('disabled',true);
			    }else if(id == "0"){
			    	 spObj3.empty();
			    	 $("#speed").prop('disabled',false);
			    	 var data3 = [
							{"value3":"a0","text3":""},
							{"value3":"a1","text3":"DR0"},
							{"value3":"a2","text3":"DR1"},
							{"value3":"a3","text3":"DR2"},
							{"value3":"a4","text3":"DR3"},
							{"value3":"a5","text3":"DR4"},
							{"value3":"a6","text3":"DR5"},
							{"value3":"a7","text3":"DR6"}
							];
			    	 var k2 = 0; 
						for( ; k2 <= data3.length-1;k2++){
							 spObj3.append("<option value='"+data3[k2].value3+"'>"+data3[k2].text3+"</option>");	
						}
				    }    
				    });
				});  */ 
			
			pwObj3.empty();	
			var arr3 = [
				{"value5":"p0","text5":""},
				{"value5":"p16","text5":"16"},
				{"value5":"p14","text5":"14"},
				{"value5":"p12","text5":"12"},
				{"value5":"p10","text5":"10"},
				{"value5":"p8","text5":"8"},
				{"value5":"p6","text5":"6"}
				];
		    var p2 =0;
			for( ; p2 <= arr3.length-1;p2++){
				 pwObj3.append("<option value='"+arr3[p2].value5+"'>"+arr3[p2].text5+"</option>");	
			}
		}
		
		//US915  AU920
		else if (rate1 == 1 || rate1 == 7){
			$("#sweep").val(" ");
			$("#sweep").prop('disabled',true);
			var spObj4 = $("#speed");
			var pwObj4 = $("#power");
			
	    	 spObj4.empty();
	    	 $("#speed").prop('disabled',false);
	    	 var data4 = [
					{"value6":"a0","text6":""},
					{"value6":"a1","text6":"DR0"},
					{"value6":"a2","text6":"DR1"},
					{"value6":"a3","text6":"DR2"},
					{"value6":"a4","text6":"DR3"},
					{"value6":"a5","text6":"DR4"},
					{"value6":"a8","text6":"DR8"},
					{"value6":"a9","text6":"DR9"},
					{"value6":"a10","text6":"DR10"},
					{"value6":"a11","text6":"DR11"},
					{"value6":"a12","text6":"DR12"},
					{"value6":"a13","text6":"DR13"}
					];
	    	 var k3 = 0; 
				for( ; k3 <= data4.length-1;k3++){
					 spObj4.append("<option value='"+data4[k3].value6+"'>"+data4[k3].text6+"</option>");	
				}
			//按钮选择判断 
			/* $("input[type='radio']").each(function(){
				   var id= $(this).attr("id");
				   if($("#"+id).attr("checked")=="checked"){
				     var fs=$("#"+id).val();
				   }
				   var id= $('input:radio[name="no"]:checked').attr("id");
				     if (id == "1"){
				    	 spObj4.empty();
				    	 $("#speed").val(" ");
						 $("#speed").prop('disabled',true);
				     }else if(id == "0"){
				    	 spObj4.empty();
				    	 $("#speed").prop('disabled',false);
				    	 var data4 = [
								{"value6":"a0","text6":""},
								{"value6":"a1","text6":"DR0"},
								{"value6":"a2","text6":"DR1"},
								{"value6":"a3","text6":"DR2"},
								{"value6":"a4","text6":"DR3"},
								{"value6":"a5","text6":"DR4"},
								{"value6":"a8","text6":"DR8"},
								{"value6":"a9","text6":"DR9"},
								{"value6":"a10","text6":"DR10"},
								{"value6":"a11","text6":"DR11"},
								{"value6":"a12","text6":"DR12"},
								{"value6":"a13","text6":"DR13"}
								];
				    	 var k3 = 0; 
							for( ; k3 <= data4.length-1;k3++){
								 spObj4.append("<option value='"+data4[k3].value6+"'>"+data4[k3].text6+"</option>");	
							}
					     }    
				  });

			$(function(){
			    $("input[type='radio']").click(function(){
			    var id= $('input:radio[name="no"]:checked').attr("id");
			     if (id == "1"){
			    	 spObj4.empty();
			    	 $("#speed").val(" ");
					 $("#speed").prop('disabled',true);
			     }else if(id == "0"){
			    	 spObj4.empty();
			    	 $("#speed").prop('disabled',false);
			    	 var data4 = [
							{"value6":"a0","text6":""},
							{"value6":"a1","text6":"DR0"},
							{"value6":"a2","text6":"DR1"},
							{"value6":"a3","text6":"DR2"},
							{"value6":"a4","text6":"DR3"},
							{"value6":"a5","text6":"DR4"},
							{"value6":"a8","text6":"DR8"},
							{"value6":"a9","text6":"DR9"},
							{"value6":"a10","text6":"DR10"},
							{"value6":"a11","text6":"DR11"},
							{"value6":"a12","text6":"DR12"},
							{"value6":"a13","text6":"DR13"}
							];
			    	 var k3 = 0; 
						for( ; k3 <= data4.length-1;k3++){
							 spObj4.append("<option value='"+data4[k3].value6+"'>"+data4[k3].text6+"</option>");	
						}
				     }    
				    });
				});   */
			pwObj4.empty();	
			var arr4 = [
				{"value6":"p0","text6":""},
				{"value6":"p30","text6":"30"},
				{"value6":"p28","text6":"28"},
				{"value6":"p26","text6":"26"},
				{"value6":"p24","text6":"24"},
				{"value6":"p22","text6":"22"},
				{"value6":"p20","text6":"20"},
				{"value6":"p18","text6":"18"},
				{"value6":"p16","text6":"16"},
				{"value6":"p14","text6":"14"},
				{"value6":"p12","text6":"12"},
				{"value6":"p10","text6":"10"}
				];
			
		    var p3 =0;
			for( ; p3 <= arr4.length-1;p3++){
				 pwObj4.append("<option value='"+arr4[p3].value6+"'>"+arr4[p3].text6+"</option>");	
			}
		}
	}
	
	//验证1
	//通信 模式 
	function checkInput2() {
		var rt = $("#rate").val();
	//	var devsel = $("#devsel").val();
		var speed = $("#speed").find("option:selected").text();
		//if (devsel <= 0) {
			//alert("请选择设备！");
		//	return false;
		//}
		if (rt <= 0) {
			alert("请选择速率制式 ！");
			return false;
		}
		
	   if(rt == 2){
			var sweep = $("#sweep").val();
			if(sweep <= 0){
				alert("请选择扫频模式  ！");
				return false;
			}else{
					var id =$('input:radio[name="no"]:checked').attr("id");
				    if(id == "1"){
				    	var power = $("#power").find("option:selected").text();
				    	if(power <= 0){
				    		alert("功率不能为空!");
				    		return false;
				    	}
				    }else{
				    	if(speed <= 0){
				    		alert("速率不能为空!");
				    		return false;
				    	}else{
				    		var power = $("#power").find("option:selected").text();
				    		if(power <= 0){
				    			alert("功率不能为空 !");
				    			return false;
				    		}
				    	}
				     }
			}
					    
	   }else{
		   var id =$('input:radio[name="no"]:checked').attr("id");
		    if(id == "1"){
		    	var power = $("#power").find("option:selected").text();
		    	if(power <= 0){
		    		alert("功率不能为空!");
		    		return false;
		    	}
		    }else{
		    	var speed = $("#speed").find("option:selected").text();
		    	if(speed <= 0){
		    		alert("速率不能为空!");
		    		return false;
		    	}else{
		    		var power = $("#power").find("option:selected").text();
		    		if(power <= 0){
		    			alert("功率不能为空 !");
		    			return false;
		    		}
		    	}
		     }
    	 }

		var connecting = {
				 usrname: inputName,
				// DEVEUI: $("#devsel").find("option:selected").text(),
				 DRSCHEME: $("#rate").val(),
				 CLAAMODE: $("#sweep").val(),
				 ADR: $('input:radio[name="no"]:checked').attr("id"),
				 DATARATE: speed.substr(2),
				 POWER:  $("#power").find("option:selected").text()		 
				};
		//调用AJAX 
		$.ajax(
			{
				async: false,
				type: "POST",
				url: "../UpdateUserDevCommSetting.do",
				data: connecting,
				success: function(data) {
				    var status = eval("("+data+")");
				    if (status == "0") {				    					 			    					 
				    	alert("更新数据库成功！");	    					
						}
				    else{
						alert("设备不存在！" + status);
					}
				   }		
	       });
		return true;
	}
	
	//验证2
	//工作模式
		function checkInput3() {
			var week1 = $("#week1").val();
			var week2 = $("#week2").val();
			var wk1 = Number(week1);
			var wk2 = Number(week2);
	
			//var devsel = $("#devsel").val();
			//if (devsel <= 0) {
				//alert("请选择设备！");
				//return false;
			//}
			
			if (week1 == "") {
				alert("位置上报周期不能为空  ！");
				return false;
			}
				if(wk1 < 0 || wk1 > 655350){
					alert("位置上报周期范围应在0-655350");
					return false;
				}
				if (week2 == "") {
					alert("心跳上报周期不能为空  ！");
					return false;
				}
					if(wk2 < 0 || wk2 > 7650){
						alert("心跳上报周期范围应在0-7650");
						return false;
					}
			
		  
			var work = {
					 usrname: inputName,
					// DEVEUI: $("#devsel").find("option:selected").text(),
					 LOSTPOINT: $('input:radio[name="no1"]:checked').attr("idx"),
					 SELFADAPT: $('input:radio[name="no2"]:checked').attr("idx"),
					 ONEOFF: $('input:radio[name="no3"]:checked').attr("idx"),
					 ALREPORT: $('input:radio[name="no4"]:checked').attr("idx"),
					 GPS: $("#week1").val(),
					 HEARTBEAT: $("#week2").val()		 
					};
			//调用AJAX 
			$.ajax(
				{
					async: false,
					type: "POST",
					url: "../UpdateUserDevWorkSetting.do",
					data: work,
					success: function(data) {
					    var status = eval("("+data+")");
					    if (status == "0") {				    					 			    					 
					    	alert("更新数据库成功！");	    					
							}
					    else{
							alert("设备不存在 ！" + status);
						}
					   }		
		       });
			return true;
		}
	
	
		function showTips(content, height, left){
			  var windowWidth  = $(window).width();  
			  var tipsDiv = '<div class="tipsClass">' + content + '</div>';  
			   
			  $( 'body' ).append( tipsDiv ); 
			  $( 'div.tipsClass' ).css({  
				  'top' : height + 5, 
			      'left' :  left + 50,
			      'position'  : 'absolute',     
			      'background': '#4682B4', 
			      'font-size' : 14 +'px',
			      'border' : '1px solid #F96',
			      'border-top-left-radius': 2.5 +'em',
			      'padding': '10px',
			      'width'     : 200 +'px',  
			      'height'    : 'auto'
			  }).show();  
			}
		function hideTips(){
			$( 'div.tipsClass' ).remove();
		}	
		
</script>

	<div align="left">
		<form id="selfConfigForm" onsubmit="return false;"
			style="margin-left: 30%; margin-top: 5%">

			<fieldset style="width: 60%; text-align: left; margin-bottom: 30px"">
				<legend id="warningTime" style="font-size: 18px;">告警信息</legend>
				<table style="width: 100%">
					<tr>
						<td align="right" style="width: 20%; font-size: 14px">告警周期：</td>
						<td style="width: 80%"><input type="checkbox" id="allday"
							name="allday" value="allday" style="width: 20px;" />每天 <input
							type="checkbox" id="monday" name="week" value="1"
							style="width: 20px;" />周一 <input type="checkbox" id="tuesday"
							name="week" value="2" style="width: 20px;" />周二 <input
							type="checkbox" id="wednesday" name="week" value="4"
							style="width: 20px;" />周三 <input type="checkbox" id="thursday"
							name="week" value="8" style="width: 20px;" />周四 <input
							type="checkbox" id="friday" name="week" value="16"
							style="width: 20px;" />周五 <input type="checkbox" id="saturday"
							name="week" value="32" style="width: 20px;" />周六 <input
							type="checkbox" id="sunday" name="week" value="64"
							style="width: 20px;" />每日</td>
					</tr>
					<tr>
						<td align="right" style="width: 20%; font-size: 14px">告警时间：</td>
						<td style="width: 80%"><input type="text" id="timepicker1"
							value="" style="width: 60px" />点 到 <input type="text"
							id="timepicker2" value="" style="width: 60px" />点</td>
					</tr>
					<!--
				<tr style="margin-bottom:10px">
					<td align="right"  style="width:20%;font-size:14px">手机号1：</td>
					<td><input type="text" id="uid1" name="uid" value="" style="width:80%; "/></td>
				</tr>
				<tr>
					<td align="right"  style="width:20%;font-size:14px">手机号2：</td>
					<td><input type="text" id="uid2"  name="uid1" value="" style="width:80%; "/></td>
				</tr>	
				<!-- 
				<tr>
					<td align="left" width=70px>生效日期：</td>
					<td><input id="datetimepicker1" type="text" value="" style="width:180px;" />
					</td>
				</tr>
				 -->
				</table>
				<div style="width: 60%;" algin="center">
					<input type="button" name="modify" value="确定" class="button_blue"
						style="margin-right: 60px; width: 20%"
						onclick="return checkInput();" />
				</div>
			</fieldset>
			<fieldset style="width: 60%; text-align: left; margin-bottom: 30px"">
				<legend id="warningTime" style="font-size: 18px;">通信参数设置</legend>
				<table style="width: 100%">
					<tr>
						<td align="right" style="width: 30%; font-size: 14px">速率制式：</td>
						<td><select id="rate" style="width: 35%; height: 20px;"
							onchange="change()"
							onmouseover="showTips('tracker支持的数据方案:欧洲市场，默认值是EU868,中国市场，默认值是CN470',$('#rate').offset().top,$('#rate').offset().left)"
							onmouseout="hideTips()">
								<option value="0"></option>
								<option value="1">AU920</option>
								<option value="2">CLAA</option>
								<option value="3">CN470</option>
								<option value="4">AS923</option>
								<option value="5">EU434</option>
								<option value="6">EU868</option>
								<option value="7">US915</option>
						</select></td>
					</tr>
					<tr>
						<td align="right" style="width: 30%; font-size: 14px">扫频模式：</td>
						<td><select id="sweep" style="width: 30%; height: 20px;"
							onmouseover="showTips('保留将来使用,如果当前速率制式是CLAA,显示当前终端的扫频模式',$('#sweep').offset().top,$('#sweep').offset().left)"
							onmouseout="hideTips()">
								<option value="0"></option>
								<option value="1">A模式</option>
								<option value="2">B模式</option>
								<option value="3">C模式</option>
								<option value="4">D模式</option>
								<option value="5">E模式</option>
								<option value="6">全屏扫描</option>
						</select></td>
					</tr>
					<tr>
						<td align="right" style="width: 30%; font-size: 14px">速率自适应：</td>

						<td>
							<div id="pp">
								<input id="1" type="radio" name="no" value="no"
									onmouseover="showTips('速率自适应,默认关闭',$('#pp').offset().top,$('#pp').offset().left)"
									onmouseout="hideTips()">&nbsp;开&nbsp;&nbsp;&nbsp; <input
									id="0" type="radio" name="no" value="off" checked="checked"
									onmouseover="showTips('速率自适应,默认关闭',$('#pp').offset().top,$('#pp').offset().left)"
									onmouseout="hideTips()">关
							</div>
						</td>
					</tr>
					<tr>
						<td align="right" style="width: 5%; font-size: 14px" valign="top">
							速率：</td>
						<td><select id="speed" style="width: 25%; height: 20px;"
							onmouseover="showTips('速率范围DR0~DR15,默认值DR2',$('#speed').offset().top,$('#speed').offset().left)"
							onmouseout="hideTips()">
								<option value=""></option>
						</select></td>
					</tr>
					<tr>
						<td align="right" style="width: 30%; font-size: 14px" valign="top">功率：</td>
						<td><select id="power" style="width: 20%; height: 20px;"
							onmouseover="showTips('配置传输功率,取决于tracker的工作模式 ',$('#power').offset().top,$('#power').offset().left)"
							onmouseout="hideTips()">
								<option value="1"></option>
						</select></td>
					</tr>
				</table>
				<div style="width: 60%;" algin="right">
					<input type="button" name="sure1" value="确定" class="button_blue"
						style="margin-right: 40%; width: 20%"
						onclick="return checkInput2();" />
				</div>
			</fieldset>
			<fieldset style="width: 60%; text-align: left; margin-bottom: 30px"">
				<legend id="warningTime" style="font-size: 18px;">工作模式设置</legend>
				<table style="width: 100%">
					<tr>
						<td align="right" style="width: 20%; font-size: 14px">断点续传：</td>
						<td style="width: 70%;">
							<div id="pp3">
								<input idx="1" type="radio" name="no1" value="no1"
									onmouseover="showTips('未能报告位置时,指示是否重新发送位置,默认关闭',$('#pp3').offset().top,$('#pp3').offset().left)"
									onmouseout="hideTips()">开&nbsp;&nbsp;&nbsp; <input
									idx="0" type="radio" name="no1" checked="checked" value="off1"
									onmouseover="showTips('未能报告位置时,指示是否重新发送位置,默认关闭',$('#pp3').offset().top,$('#pp3').offset().left)"
									onmouseout="hideTips()">关
							</div>
						</td>
					</tr>
					<tr>
						<td align="right" style="width: 20%; font-size: 14px">自主工作：</td>
						<td>
							<div id="pp2">
								<input idx="1" type="radio" name="no2" value="no2"
									onmouseover="showTips('指示tracker是否处于自主工作模式,默认关闭',$('#pp2').offset().top,$('#pp2').offset().left)"
									onmouseout="hideTips()">开&nbsp;&nbsp;&nbsp; <input
									idx="0" type="radio" name="no2" checked="checked" value="off2"
									onmouseover="showTips('指示tracker是否处于自主工作模式,默认关闭',$('#pp2').offset().top,$('#pp2').offset().left)"
									onmouseout="hideTips()">关

							</div>
						</td>
					</tr>
					<tr>
						<td align="right" style="width: 20%; font-size: 14px">单次上报：</td>
						<td>
							<div id="pp1">
								<input idx="1" type="radio" name="no3" value="no3"
									onmouseover="showTips('指示tracker是否处于命令请求模式,此模式下终端不主动上报位置，默认关闭',$('#pp1').offset().top,$('#pp1').offset().left)"
									onmouseout="hideTips()">开&nbsp;&nbsp;&nbsp; <input
									idx="0" type="radio" name="no3" checked="checked" value="off3"
									onmouseover="showTips('指示tracker是否处于命令请求模式,此模式下终端不主动上报位置，默认关闭',$('#pp1').offset().top,$('#pp1').offset().left)"
									onmouseout="hideTips()">关

							</div>
						</td>
					</tr>
					<tr>
						<td align="right" style="width: 20%; font-size: 14px">智能上报：</td>
						<td>
							<div id="pp4">
								<input idx="1" type="radio" name="no4" value="no4"
									onmouseover="showTips('指示tracker处于静止时是否上报数据，默认关闭',$('#pp4').offset().top,$('#pp4').offset().left)"
									onmouseout="hideTips()">开&nbsp;&nbsp;&nbsp; <input
									idx="0" type="radio" name="no4" checked="checked" value="off4"
									onmouseover="showTips('指示tracker处于静止时是否上报数据，默认关闭',$('#pp4').offset().top,$('#pp4').offset().left)"
									onmouseout="hideTips()">关

							</div>
						</td>
					</tr>
					<tr>
						<td align="right" style="width: 30%; font-size: 14px">位置上报周期：</td>
						<td><input id="week1" type="text" style="width: 80px;"
							onmouseover="showTips('GPS位置报告周期,单位为10秒,0代表关闭GPS定位,默认值5分钟',$('#week1').offset().top,$('#week1').offset().left)"
							onmouseout="hideTips()">x10秒&nbsp;&nbsp;</td>
					</tr>
					<tr>
						<td align="right" style="width: 30%; font-size: 14px">心跳上报周期：</td>
						<td><input id="week2" type="text" style="width: 80px;"
							onmouseover="showTips('心跳消息周期,单位为30秒;心跳不能被禁用,默认值2分钟',$('#week2').offset().top,$('#week2').offset().left)"
							onmouseout="hideTips()">x30秒&nbsp;&nbsp;</td>
					</tr>
				</table>
				<div style="width: 60%;" algin="right">
					<input type="button" name="sure2" value="确定" class="button_blue"
						style="margin-right: 40%; width: 20%"
						onclick="return checkInput3();" />
				</div>
			</fieldset>
		</form>
	</div>
</body>
<script>
$.datetimepicker.setLocale('ch');
$('#timepicker1').datetimepicker({
		datepicker:false,
		format:'H:i',
		step:30
	});
$('#timepicker2').datetimepicker({
	datepicker:false,
	format:'H:i',
	step:30
});
//$('#datetimepicker1').datetimepicker({
//		timepicker:false,
//		format:'Y-m-d',
//	});

</script>
</html>
